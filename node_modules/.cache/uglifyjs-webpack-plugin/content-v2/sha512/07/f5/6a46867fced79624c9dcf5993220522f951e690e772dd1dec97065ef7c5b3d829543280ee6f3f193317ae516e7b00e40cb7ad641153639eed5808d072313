{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[45],{\"162\":function(e,t,o){e.exports=o.p+\"pages/collect/collect.wxml\"},\"20\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var v=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],n=!0,r=!1,l=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw l}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r,l,a,b=o(1),c=_interopRequireDefault(b),i=_interopRequireDefault(o(2)),u=_interopRequireDefault(o(3)),S=_interopRequireDefault(o(9)),$=_interopRequireDefault(o(382)),w=_interopRequireDefault(o(4)),s=_interopRequireDefault(o(11));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var _=(0,i.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Collect,c.default.Component),n(Collect,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if(\"value\"in n)return n.value;var l=n.get;return void 0!==l?l.call(o):void 0})(Collect.prototype.__proto__||Object.getPrototypeOf(Collect.prototype),\"_constructor\",this).call(this,e),this.state={\"list\":[],\"isLoaded\":!0,\"hasMore\":!1,\"isEmpty\":!0,\"screenHeight\":\"\",\"level\":\"1\"},this.$$refs=new c.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var t=this;this.getLevel(),c.default.getSystemInfo({\"success\":function success(e){t.setState({\"screenHeight\":e.screenHeight}),t.getData({})}})}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){var i=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var n=this.$prefix,r=(0,b.genCompid)(n+\"$compid__71\"),l=v(r,2),a=l[0],c=l[1],u=this.__state,s=u.isLoaded,_=u.hasMore,p=u.isEmpty,d=u.list,f=u.screenHeight,m=(u.level,{\"height\":f+\"px\"}),y={\"launchEmpty\":!0},g=(0,b.internal_inline_style)({\"minHeight\":f+\"px\"}),h=(d||[]).map(function(e,t){e={\"$original\":(0,b.internal_get_original)(e)};var o=\"edzzz\"+t;i.anonymousFunc0Map[o]=function(){return i.goProduct(e.$original)};var n=e.$original&&\"ON_SALES\"==e.$original.status?(0,b.internal_inline_style)({\"backgroundImage\":\"url(\"+w.default.getFileUrl(e.$original.mainImgUrl)+\")\"}):null,r=!e.$original||\"DOWN_SALES\"!=e.$original.status&&\"INVALID\"!=e.$original.status?null:(0,b.internal_inline_style)({\"backgroundImage\":\"url(\"+w.default.getFileUrl(e.$original.mainImgUrl)+\")\"}),l=!e.$original||\"DOWN_SALES\"!=e.$original.status&&\"INVALID\"!=e.$original.status?null:(0,b.internal_inline_style)({\"backgroundImage\":\"url(\"+S.default.goods.down+\")\"}),a=\"eezzz\"+t;return i.anonymousFunc1Map[a]=function(){return i.clearProduct(e.$original,t)},{\"_$indexKey\":o,\"$loopState__temp5\":n,\"$loopState__temp7\":r,\"$loopState__temp9\":l,\"_$indexKey2\":a,\"$original\":e.$original}});return b.propsManager.set({\"isLoaded\":s,\"hasMore\":_,\"isEmpty\":p,\"onScrollToLower\":this.onScrollToLower,\"onPullDownRefresh\":this.onPullDownRefresh,\"style\":m,\"launch\":y},c,a),this.$$refs.pushRefs([{\"type\":\"component\",\"id\":\"eczzz\",\"refName\":\"\",\"fn\":function fn(e){return i.scrollV=e}}]),Object.assign(this.__state,{\"anonymousState__temp\":m,\"anonymousState__temp2\":y,\"anonymousState__temp3\":g,\"loopArray29\":h,\"$compid__71\":c,\"styles\":$.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc0Map[e]&&(t=this.anonymousFunc0Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc1Map[e]&&(t=this.anonymousFunc1Map)[e].apply(t,n)}}]),a=l=Collect,l.$$events=[\"anonymousFunc0\",\"anonymousFunc1\"],l.$$componentPath=\"pages/collect/collect\",r=a))||r;function Collect(){var e,t,i;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Collect);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=i=_possibleConstructorReturn(this,(e=Collect.__proto__||Object.getPrototypeOf(Collect)).call.apply(e,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"loopArray29\",\"$compid__71\",\"list\",\"styles\",\"level\",\"isLoaded\",\"hasMore\",\"isEmpty\",\"screenHeight\"],i.getLevel=function(){var e=s.default.globalStore.data.userInfo,t=e.shopId;if(!e.companyId)return!1;u.default.order.getShopMemberLevel({\"shopId\":t}).then(function(e){e&&i.setState({\"level\":e})})},i.clearProduct=function(e,t){var o=i.state.list,n=e.id,r=e.itemId,l=e.agentCompanyId;u.default.goods.collect({\"agentItemId\":n,\"itemId\":r,\"agentCompanyId\":l,\"collect\":0}).then(function(e){if(!e)return!1;o.splice(t,1),i.setState({\"list\":o,\"isEmpty\":0==o.length})})},i.goProduct=function(e){var t=i.$router.params.companyId;c.default.navigateTo({\"url\":\"/pages/goodsdetail/goodsdetail?agentItemId=\"+e.id+\"&itemId=\"+e.itemId+\"&companyId=\"+(t||c.default.getStorageSync(\"userInfo\").companyId)})},i.getData=function(e){var t=e.pageNo,o=void 0===t?1:t,n=e.pageSize,r=void 0===n?15:n,l=e.callback,a=i.state.list;u.default.goods.collectList({\"pageNo\":o,\"pageSize\":r}).then(function(e){if(!e)return!1;var t=a.concat(e);i.setState({\"isLoaded\":!0,\"isShow\":!0,\"list\":t,\"pageNum\":o,\"isEmpty\":t.length<=0}),e.length<r?i.setState({\"hasMore\":!1}):i.setState({\"hasMore\":!0}),l&&l()})},i.onScrollToLower=function(e){var t=i.state.pageNum;t++,i.getData({\"pageNo\":t,\"callback\":e})},i.onPullDownRefresh=function(e){i.setState({\"list\":[]},function(){return i.getData({\"callback\":e})})},i.config={\"navigationBarTitleText\":\"我的收藏\"},i.anonymousFunc0Map={},i.anonymousFunc1Map={},i.customComponents=[\"ListView\",\"Empty\"],_possibleConstructorReturn(i,t)}t.default=_,Component(o(1).default.createComponent(_,!0))},\"380\":function(e,t,o){\"use strict\";o.r(t);o(381);var n=o(89);for(var r in n)\"default\"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r)},\"381\":function(e,t,o){\"use strict\";o(162)},\"382\":function(e,t,o){e.exports={\"list\":\"collect-module__list___1G9G0\",\"store_desc\":\"collect-module__store_desc___2GD8Z\",\"store_icon\":\"collect-module__store_icon___QfkWu\",\"arrow_icon\":\"collect-module__arrow_icon___1Nn-F\",\"product_desc\":\"collect-module__product_desc___2S15X\",\"product_img\":\"collect-module__product_img___R9dtv\",\"product_info\":\"collect-module__product_info___1BQ2L\",\"product_title\":\"collect-module__product_title___3GBrM\",\"product_price\":\"collect-module__product_price___1eoQn\",\"product_profit\":\"collect-module__product_profit___2xfxM\",\"product_price_box\":\"collect-module__product_price_box___tuCBF\",\"product_buy\":\"collect-module__product_buy___3oC-c\",\"gray\":\"collect-module__gray___1pWRR\",\"black\":\"collect-module__black___yPm_M\",\"product_clear\":\"collect-module__product_clear___3Krfr\",\"product_profit_gray\":\"collect-module__product_profit_gray___1eGac\",\"mask\":\"collect-module__mask___2JRb_\",\"empty\":\"collect-module__empty___3kLGc\",\"empty_box\":\"collect-module__empty_box___1BPcW\"}},\"89\":function(e,t,o){\"use strict\";o.r(t);var n=o(20),r=o.n(n);for(var l in n)\"default\"!==l&&function(e){o.d(t,e,function(){return n[e]})}(l);t.default=r.a}},[[380,0,1,2,3]]]);","extractedComments":[]}