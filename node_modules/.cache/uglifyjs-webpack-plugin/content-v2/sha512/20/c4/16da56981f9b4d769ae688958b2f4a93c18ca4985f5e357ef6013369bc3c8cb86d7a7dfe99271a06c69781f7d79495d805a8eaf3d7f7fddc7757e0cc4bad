{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[73],{\"178\":function(e,t,o){e.exports=o.p+\"pages/submission/submission.wxml\"},\"23\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var C=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],n=!0,s=!1,i=void 0;try{for(var r,u=e[Symbol.iterator]();!(n=(r=u.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(s)throw i}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,i,r,O=o(0),u=_interopRequireDefault(O),a=o(3),_=_interopRequireDefault(o(1)),l=o(4),d=_interopRequireDefault(o(2)),c=_interopRequireDefault(o(11)),I=_interopRequireDefault(o(288));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var w=l.appUtils.getFileUrl,P=l.appUtils.formatPoint,m=(0,_.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Submission,u.default.Component),n(Submission,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var s=Object.getPrototypeOf(e);return null===s?void 0:get(s,t,o)}if(\"value\"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0})(Submission.prototype.__proto__||Object.getPrototypeOf(Submission.prototype),\"_constructor\",this).call(this,e),this.state={\"info\":{},\"address\":null},l.appUtils.delay(this,[\"onCallPay\"]),this.$$refs=new u.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=u.default.getStorageSync(\"infoForOrder\"),t=u.default.getStorageSync(\"checkAddress\");e&&(e.propsValue=this.getSelect(e.selectValue),this.setState({\"info\":e})),t?this.setState({\"address\":t}):this.adressList()}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){this.__state=e||this.state||{},this.__props=t||this.props||{};var n=this.$prefix,s=(0,O.genCompid)(n+\"$compid__114\"),i=C(s,2),r=i[0],u=i[1],a=(0,O.genCompid)(n+\"$compid__115\"),_=C(a,2),l=_[0],d=_[1],c=(0,O.genCompid)(n+\"$compid__116\"),m=C(c,2),p=m[0],f=m[1],b=this.__state,g=b.address,y=b.info,v=g?(\"\"+g.receiver).substr(0,12):null,h=w(y.skuImg),S=P(y.tradePrice*y.count,4),x=P(y.tradePrice*y.count);return g||O.propsManager.set({\"value\":\"add\",\"size\":\"20\",\"color\":\"#676767\",\"className\":I.default.icon},u,r),O.propsManager.set({\"count\":1},d,l),O.propsManager.set({\"min\":1,\"max\":y.stockQty,\"step\":1,\"value\":y.count,\"onChange\":this.handleInputChange},f,p),Object.assign(this.__state,{\"anonymousState__temp\":v,\"anonymousState__temp2\":h,\"anonymousState__temp3\":S,\"anonymousState__temp4\":x,\"$compid__114\":u,\"$compid__115\":d,\"$compid__116\":f,\"styles\":I.default}),this.__state}}]),r=i=Submission,i.$$events=[\"goAddress\",\"checkAddress\",\"onCallPay\"],i.$$componentPath=\"pages/submission/submission\",s=r))||s;function Submission(){var e,t,i;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Submission);for(var o=arguments.length,n=Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=i=_possibleConstructorReturn(this,(e=Submission.__proto__||Object.getPrototypeOf(Submission)).call.apply(e,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"anonymousState__temp4\",\"$compid__114\",\"$compid__115\",\"$compid__116\",\"styles\",\"address\",\"info\"],i.handleInputChange=function(e){var t=i.state.info;t.count=e,i.setState({\"info\":t}),c.default.globalStore.setData(\"infoForOrder\",Object.assign({},t),\"submission.jsx,line:44\")},i.goAddress=function(){u.default.navigateTo({\"url\":\"/pages/edit-address/edit-address?backUrl=/pages/submission/submission&first=1\"})},i.checkAddress=function(){u.default.navigateTo({\"url\":\"/pages/address/address?backUrl=/pages/submission/submission\"})},i.onCallPay=function(){var e=i.state,t=e.address,o=e.info;if(!c.default.globalStore.data.envUserInfo.openId)return a.message.warn(\"请先登录授权之后再操作\"),l.appUtils.navigateToLogin({\"params\":l.appUtils.getCurrentPage().options||{},\"desc\":\"[system] file:orderpay/index.js line:10\"}),i.logger({\"logs\":\"重新授权\"}),!1;var n=o.orderSource||3,s={\"areaCode\":t.areaId,\"cityCode\":t.cityId,\"provinceCode\":t.provinceId,\"province\":t.province,\"city\":t.city,\"area\":t.area,\"detailAddress\":t.address,\"receiveName\":t.receiver,\"receivePhone\":t.phone,\"streetCode\":t.streetId,\"count\":o.count,\"skuId\":o.skuId,\"agentItemId\":o.agentItemId,\"orderSource\":n,\"liveId\":o.liveId};d.default.order.doOrder(s).then(function(e){e&&(i.logger({\"logs\":\"下单成功\",\"api_url\":\"/orderservice/order/create\",\"api_req\":JSON.stringify(s),\"api_res\":JSON.stringify(e)}),l.orderPay.Opay(i,e))})},i.defAddress=function(){d.default.order.defAddress().then(function(e){i.setState({\"address\":e})})},i.adressList=function(){d.default.address.getList().then(function(e){if(0<e.totalRecordSize){var t=e.records.findIndex(function(e){return!0===e.isDefault});i.setState({\"address\":0<=t?e.records[t]:e.records[0]})}})},i.getSelect=function(){var o=[];return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(e,t){o.push(e.propertyValue)}),o.join(\"/\")},i.config={\"navigationBarTitleText\":\"提交订单\",\"navigationBarBackgroundColor\":\"#F7F8FA\"},i.customComponents=[\"AtIcon\",\"Ellipsis\",\"AtInputNumber\"],_possibleConstructorReturn(i,t)}t.default=m,Component(o(0).default.createComponent(m,!0))},\"286\":function(e,t,o){\"use strict\";o.r(t);o(287);var n=o(98);for(var s in n)\"default\"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s)},\"287\":function(e,t,o){\"use strict\";o(178)},\"288\":function(e,t,o){e.exports={\"container\":\"submission-module__container___2x8AC\",\"addres_box\":\"submission-module__addres_box___1qBQj\",\"icon\":\"submission-module__icon___3tiSo\",\"product_box\":\"submission-module__product_box___1a6el\",\"title\":\"submission-module__title___2Ooa2\",\"font\":\"submission-module__font___3j6y0\",\"icon_shop\":\"submission-module__icon_shop___PYgG7\",\"info_box\":\"submission-module__info_box___3A683\",\"img\":\"submission-module__img___18T3M\",\"info_right\":\"submission-module__info_right___2UHEL\",\"item_line\":\"submission-module__item_line___JrzIw\",\"info_title\":\"submission-module__info_title___2SBZW\",\"num\":\"submission-module__num___2GVlX\",\"recv\":\"submission-module__recv___3UVL4\",\"second\":\"submission-module__second___3hyC7\",\"all_price\":\"submission-module__all_price___1gy9J\",\"all_num\":\"submission-module__all_num___1_aqc\",\"count_box\":\"submission-module__count_box___1Y-oU\",\"transfee_box\":\"submission-module__transfee_box___1aG_B\",\"red\":\"submission-module__red___2u0EM\",\"gray\":\"submission-module__gray___1OWAP\",\"button_box\":\"submission-module__button_box___1J_gI\",\"content\":\"submission-module__content___25fFC\",\"button\":\"submission-module__button___2Bsuz\",\"gray_button\":\"submission-module__gray_button___3AL1Y\",\"item\":\"submission-module__item___Kcbqd\",\"left\":\"submission-module__left___1xO8_\",\"name_box\":\"submission-module__name_box___25ilT\",\"name\":\"submission-module__name___2wNHs\",\"tel\":\"submission-module__tel___3TRCB\"}},\"98\":function(e,t,o){\"use strict\";o.r(t);var n=o(23),s=o.n(n);for(var i in n)\"default\"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t.default=s.a}},[[286,0,1,2,3]]]);","extractedComments":[]}