{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[59],{\"171\":function(e,t,n){e.exports=n.p+\"pages/login/login.wxml\"},\"19\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i,r,a,g=n(0),u=_interopRequireDefault(g),l=n(3),s=_interopRequireDefault(n(1)),c=n(2),_=_interopRequireDefault(c),d=_interopRequireDefault(n(6)),h=_interopRequireDefault(n(264));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var f=(0,s.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Login,u.default.Component),o(Login,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,n)}if(\"value\"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0})(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),\"_constructor\",this).call(this,e),this.state={\"telphone\":\"\",\"code\":\"\",\"send\":!1,\"second\":60,\"isPhone\":!0},this.btnClicked=!1,this.$$refs=new u.default.RefsArray}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){var o=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var i=this.$prefix,r=(0,g.genCompid)(i+\"$compid__89\"),a=p(r,2),s=a[0],u=a[1],l=(this.__props.globalStore.data.userInfo.shopDetail,this.__state),c=l.telphone,_=l.code,d=(l.send,l.second,l.isPhone),f=0<c.length&&/^1\\d{10}$/.test(c)&&6==_.length;return this.anonymousFunc0=function(e){o.getInput(e,\"telphone\")},this.anonymousFunc1=function(){return f?o.doLogin():null},g.propsManager.set({\"className\":h.default.info_insert_phone,\"name\":\"telphone\",\"error\":!d&&!!c,\"type\":\"phone\",\"onChange\":this.anonymousFunc0,\"value\":c,\"placeholder\":\"请输入手机号\"},u,s),Object.assign(this.__state,{\"$compid__89\":u,\"isOkLogin\":f,\"styles\":h.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}}]),a=r=Login,r.$$events=[\"anonymousFunc1\",\"getCode\",\"onCodeBlur\",\"sendCode\"],r.$$componentPath=\"pages/login/login\",i=a))||i;function Login(){var e,t,s;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Login);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=s=_possibleConstructorReturn(this,(e=Login.__proto__||Object.getPrototypeOf(Login)).call.apply(e,[this].concat(o)))).$usedState=[\"$compid__89\",\"isOkLogin\",\"styles\",\"send\",\"second\",\"telphone\",\"code\",\"isPhone\",\"globalStore\"],s.componentDidMount=function(){u.default.showShareMenu({\"withShareTicket\":!0}),u.default.updateShareMenu({\"withShareTicket\":!0})},s.onShareAppMessage=function(e){s.logger({\"logs\":\"C端分享\"});return{\"title\":\"价低品全质优省事\",\"path\":\"/pages/login-guide/login-guide?companyId=\"+s.getCompanyId(),\"imageUrl\":d.default.common.share_logo,\"success\":function success(e){e.errMsg},\"fail\":function fail(){\"shareAppMessage:fail cancel\"==res.errMsg||res.errMsg},\"complete\":function complete(){}}},s.getCode=function(e){s.setState({\"code\":e.detail.value.slice(0,6)})},s.onCodeBlur=function(){var e=s.state.code;s.setState({\"code\":e.slice(0,6)})},s.sendCode=function(){var t=s.state.telphone;_.default.login.sendCode({\"phone\":t,\"codeType\":10}).then(function(e){s.logger({\"logs\":\"获取验证码\",\"api_url\":\"/userservice/sms/sendCode\",\"api_req\":JSON.stringify({\"phone\":t,\"codeType\":10}),\"api_res\":JSON.stringify(e)}),e&&(s.setState({\"send\":!0}),l.message.success(\"发送成功\"),s.countTime())})},s.countTime=function(){var e=60,t=setInterval(function(){--e<=0&&clearInterval(t),s.setState({\"second\":0==e?60:e,\"send\":0<e})},1e3)},s.doLogin=function(){if(!s.btnClicked){var e=s.state,t=e.telphone,n=e.code,o=s.props.globalStore,i=s.$router.params.mark,r=o.data.userInfo;s.btnClicked=!0;var a={\"phone\":t,\"smsCode\":n,\"shopId\":r.shopId};_.default.login.smsLogin(a).then(function(e){if(s.logger({\"logs\":\"手机号登录注册\",\"api_url\":\"/userservice/login/doSmsLoginForMember\",\"api_req\":JSON.stringify(a),\"api_res\":JSON.stringify(e)}),s.btnClicked=!1,e){e.headImg=e.headImg||d.default.common.default_photo,o.setData(\"userInfo\",e,\"login.jsx,line:157\"),l.$ajax.injectHeaders((0,c.getFetchHeader)());var t=u.default.getStorageSync(\"fromUrl\");if(u.default.removeStorageSync(\"fromUrl\"),!0===e.needBindInvitation)u.default.navigateTo({\"url\":i?\"/pages/invitecode/invitecode?mark=\"+i:\"/pages/invitecode/invitecode\"});else if(!0===e.needBindShop)u.default.navigateTo({\"url\":\"/pages/home/home\"});else{if(t)0<t.search(/\\/my|\\/contactus|\\/collect/)?u.default.switchTab({\"url\":t}):u.default.navigateTo({\"url\":t});else u.default.switchTab({\"url\":\"/pages/index/index\"})}}})}},s.getInput=function(e,t){s.setState(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{\"value\":n,\"enumerable\":!0,\"configurable\":!0,\"writable\":!0}):e[t]=n,e}({},t,e),function(){\"telphone\"===t&&s.setState({\"isPhone\":/^1\\d{10}$/.test(e)})})},s.config={\"navigationBarTitleText\":\"康小铺注册\"},s.customComponents=[\"AtInput\"],_possibleConstructorReturn(s,t)}t.default=f,Component(n(0).default.createComponent(f,!0))},\"262\":function(e,t,n){\"use strict\";n.r(t);n(263);var o=n(93);for(var i in o)\"default\"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i)},\"263\":function(e,t,n){\"use strict\";n(171)},\"264\":function(e,t,n){e.exports={\"container\":\"login-module__container___31yvi\",\"store_name\":\"login-module__store_name___2ziYN\",\"store_desc\":\"login-module__store_desc___2-W87\",\"form_box\":\"login-module__form_box___37yu5\",\"info_box\":\"login-module__info_box___3GfT9\",\"phone_box\":\"login-module__phone_box___1bAFI\",\"area_code\":\"login-module__area_code___31OTz\",\"phone_inner\":\"login-module__phone_inner___xr7KG\",\"info_insert\":\"login-module__info_insert___3XlVi\",\"info_insert_phone\":\"login-module__info_insert_phone___TTTU4\",\"info_insert_code\":\"login-module__info_insert_code___15wWu\",\"placeholder\":\"login-module__placeholder___1aCqS\",\"btn_disable\":\"login-module__btn_disable___xqyqe\",\"btn_able\":\"login-module__btn_able___2Q-PF\",\"code_box\":\"login-module__code_box___30Oxs\",\"code\":\"login-module__code___2-rfv\",\"time\":\"login-module__time___3pGXf\"}},\"93\":function(e,t,n){\"use strict\";n.r(t);var o=n(19),i=n.n(o);for(var r in o)\"default\"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t.default=i.a}},[[262,0,1,2,3]]]);","extractedComments":[]}