{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[57],{\"159\":function(e,t,o){e.exports=o.p+\"pages/login/login.wxml\"},\"17\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var b=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r,i,a,I=o(1),s=_interopRequireDefault(I),u=o(5),l=_interopRequireDefault(o(2)),c=o(3),_=_interopRequireDefault(c),x=_interopRequireDefault(o(4)),w=_interopRequireDefault(o(368));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var p=(0,l.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Login,s.default.Component),n(Login,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if(\"value\"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0})(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),\"_constructor\",this).call(this,e),this.state={\"telphone\":\"\",\"code\":\"\",\"send\":!1,\"second\":60,\"shopInfo\":{},\"companyId\":this.$router.params.companyId,\"isPhone\":!0},this.$$refs=new s.default.RefsArray}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var t=this,e=this.props.globalStore,o=this.state.companyId,n=void 0===o?e.data.userInfo.companyId:o;n&&_.default.goods.shopBaseInfo({\"companyId\":n}).then(function(e){e&&(e.logo=e.logo||\"https://jxkcdn.jingxiaokang.com/assets/images/1585016841695_278.png\",t.setState({\"shopInfo\":e}))})}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){var n=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var r=this.$prefix,i=(0,I.genCompid)(r+\"$compid__70\"),a=b(i,2),s=a[0],u=a[1],l=this.__state,c=l.telphone,_=l.code,p=l.send,f=(l.second,l.shopInfo),d=l.isPhone,g=/^1\\d{10}$/,m=(0,I.internal_inline_style)({\"backgroundImage\":\"url(\"+x.default.getFileUrl(f.logo)+\")\"});this.anonymousFunc0=function(e){n.getInput(e,\"telphone\")};var h=g.test(c)&&!p,y=!g.test(c)||\"\"==c||_.length<6,v=0<c.length&&g.test(c)&&6==_.length;return I.propsManager.set({\"name\":\"telphone\",\"error\":!d&&c,\"type\":\"phone\",\"onChange\":this.anonymousFunc0,\"value\":c},u,s),Object.assign(this.__state,{\"anonymousState__temp\":m,\"anonymousState__temp2\":h,\"anonymousState__temp3\":y,\"anonymousState__temp4\":v,\"$compid__70\":u,\"styles\":w.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}}]),a=i=Login,i.$$events=[\"getCode\",\"sendCode\",\"goNext\"],i.$$componentPath=\"pages/login/login\",r=a))||r;function Login(){var e,t,a;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Login);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=a=_possibleConstructorReturn(this,(e=Login.__proto__||Object.getPrototypeOf(Login)).call.apply(e,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"anonymousState__temp4\",\"$compid__70\",\"styles\",\"send\",\"shopInfo\",\"second\",\"telphone\",\"code\",\"companyId\",\"isPhone\",\"globalStore\"],a.getCode=function(e){a.setState({\"code\":e.detail.value.slice(0,6)})},a.sendCode=function(){var e=a.state.telphone;_.default.login.sendCode({\"phone\":e,\"codeType\":10}).then(function(e){e&&(a.setState({\"send\":!0}),u.message.success(\"发送成功\"),a.countTime())})},a.countTime=function(){var e=60,t=setInterval(function(){0==--e&&a.setState({\"send\":!1},function(){return clearInterval(t),!1}),a.setState({\"second\":0==e?60:e})},1e3)},a.goNext=function(){var e=a.state.shopInfo.shopId;a.doLogin(e)},a.doLogin=function(e){var t=a.state,o=t.telphone,n=t.code,r=a.props.globalStore,i=a.$router.params.mark;\"13588428548\"===o&&s.default.setStorageSync(\"showWebControl\",{\"showTime\":(new Date).valueOf()}),_.default.login.smsLogin({\"phone\":o,\"smsCode\":n,\"shopId\":e}).then(function(e){e&&(e.headImg=e.headImg||\"https://jxkcdn.jingxiaokang.com/assets/images/taro_h5_defaultphoto.svg\",r.setData(\"userInfo\",e),u.$ajax.injectHeaders((0,c.getFetchHeader)()),e.needBindInvitation?s.default.navigateTo({\"url\":i?\"/pages/invitecode/invitecode?mark=\"+i:\"/pages/invitecode/invitecode\"}):s.default.navigateTo({\"url\":\"/pages/index/index?companyId=\"+e.companyId}))})},a.getInput=function(e,t){a.setState(function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{\"value\":o,\"enumerable\":!0,\"configurable\":!0,\"writable\":!0}):e[t]=o,e}({},t,e),function(){\"telphone\"===t&&a.setState({\"isPhone\":/^1\\d{10}$/.test(e)})})},a.scroll=function(){window.scroll(0,0)},a.config={\"navigationBarTitleText\":\"康小铺注册\"},a.customComponents=[\"AtInput\"],_possibleConstructorReturn(a,t)}t.default=p,Component(o(1).default.createComponent(p,!0))},\"366\":function(e,t,o){\"use strict\";o.r(t);o(367);var n=o(86);for(var r in n)\"default\"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r)},\"367\":function(e,t,o){\"use strict\";o(159)},\"368\":function(e,t,o){e.exports={\"container\":\"login-module__container___31yvi\",\"back\":\"login-module__back___3hsRm\",\"icon\":\"login-module__icon___267px\",\"store_name\":\"login-module__store_name___2ziYN\",\"store_desc\":\"login-module__store_desc___2-W87\",\"form_box\":\"login-module__form_box___37yu5\",\"info_box\":\"login-module__info_box___3GfT9\",\"info_insert\":\"login-module__info_insert___3XlVi\",\"info_insert_code\":\"login-module__info_insert_code___15wWu\",\"btn_gray\":\"login-module__btn_gray___3RTaR\",\"btn_red\":\"login-module__btn_red___1bmU8\",\"code_box\":\"login-module__code_box___30Oxs\",\"time\":\"login-module__time___3pGXf\"}},\"86\":function(e,t,o){\"use strict\";o.r(t);var n=o(17),r=o.n(n);for(var i in n)\"default\"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t.default=r.a}},[[366,0,1,2,3]]]);","extractedComments":[]}