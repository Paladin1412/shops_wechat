{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[47],{\"100\":function(e,t,o){\"use strict\";o.r(t);var n=o(25),r=o.n(n);for(var a in n)\"default\"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t.default=r.a},\"180\":function(e,t,o){e.exports=o.p+\"pages/edit-address/edit-address.wxml\"},\"25\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var J=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],n=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r,a,i,Y=o(0),h=_interopRequireDefault(Y),y=o(3),s=_interopRequireDefault(o(1)),v=_interopRequireDefault(o(2)),Z=_interopRequireDefault(o(294));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var d=(0,s.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(EditAddress,h.default.Component),n(EditAddress,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if(\"value\"in n)return n.value;var a=n.get;return void 0!==a?a.call(o):void 0})(EditAddress.prototype.__proto__||Object.getPrototypeOf(EditAddress.prototype),\"_constructor\",this).call(this,e),this.state={\"cityData\":[],\"isPhone\":!0,\"phone\":\"\",\"receiver\":\"\",\"isDefault\":!1,\"id\":\"\",\"house\":\"\",\"visiable\":!1},this.$$refs=new h.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this,t=this.$router.params.id;if(!t)return!1;this.setState({\"id\":t},function(){return e.getDetail(t)})}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){var n=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var r=this.$prefix,a=(0,Y.genCompid)(r+\"$compid__106\"),i=J(a,2),s=i[0],d=i[1],u=(0,Y.genCompid)(r+\"$compid__107\"),c=J(u,2),l=c[0],_=c[1],p=(0,Y.genCompid)(r+\"$compid__108\"),f=J(p,2),m=f[0],h=f[1],y=(0,Y.genCompid)(r+\"$compid__109\"),v=J(y,2),g=v[0],b=v[1],$=(0,Y.genCompid)(r+\"$compid__110\"),C=J($,2),D=C[0],w=C[1],x=(0,Y.genCompid)(r+\"$compid__111\"),A=J(x,2),k=A[0],S=A[1],P=(0,Y.genCompid)(r+\"$compid__112\"),O=J(P,2),j=O[0],F=O[1],I=(0,Y.genCompid)(r+\"$compid__113\"),E=J(I,2),M=E[0],R=E[1],T=this.__state,N=T.cityData,q=T.phone,W=T.isPhone,U=T.receiver,L=T.house,X=T.isDefault,H=(T.id,T.visiable);this.anonymousFunc0=function(e){n.getInput(e,\"receiver\")};var z=!W;this.anonymousFunc1=function(e){n.getInput(e,\"phone\")},this.anonymousFunc2=function(e){n.getInput(e,\"house\")};var B=N.length?N.map(function(e){return e.areaName}).join(\" / \"):null;return H&&Y.propsManager.set({\"cancle\":this.cancle,\"ok\":this.ok,\"content\":\"是否确定删除收货地址\",\"okText\":\"确定删除\"},d,s),Y.propsManager.set({\"onSubmit\":this.onSubmit,\"onReset\":this.onReset},_,l),Y.propsManager.set({\"name\":\"receiver\",\"title\":\"收货人\",\"type\":\"text\",\"placeholder\":\"请输入\",\"value\":U,\"onChange\":this.anonymousFunc0},h,m),Y.propsManager.set({\"name\":\"phone\",\"title\":\"手机号\",\"error\":z,\"type\":\"phone\",\"placeholder\":\"请输入收货人手机号\",\"onChange\":this.anonymousFunc1,\"value\":q},b,g),Y.propsManager.set({\"onChange\":this.AreaPickerChange},w,D),Y.propsManager.set({\"className\":Z.default.textarea,\"name\":\"house\",\"type\":\"text\",\"placeholder\":\"请输入街道、小区、门牌号等\",\"value\":L,\"onChange\":this.anonymousFunc2,\"placeholderClass\":Z.default.placeholder},S,k),Y.propsManager.set({\"title\":\"设为默认地址\",\"checked\":X,\"onChange\":this.changeMoren,\"name\":\"isDefault\",\"color\":\"#FF3013\"},F,j),Y.propsManager.set({\"formType\":\"submit\"},R,M),Object.assign(this.__state,{\"anonymousState__temp\":z,\"anonymousState__temp2\":B,\"$compid__106\":d,\"$compid__107\":_,\"$compid__108\":h,\"$compid__109\":b,\"$compid__110\":w,\"$compid__111\":S,\"$compid__112\":F,\"$compid__113\":R,\"styles\":Z.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}},{\"key\":\"anonymousFunc2\",\"value\":function anonymousFunc2(){}}]),i=a=EditAddress,a.$$events=[\"delAddress\"],a.$$componentPath=\"pages/edit-address/edit-address\",r=i))||r;function EditAddress(){var e,t,m;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,EditAddress);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=m=_possibleConstructorReturn(this,(e=EditAddress.__proto__||Object.getPrototypeOf(EditAddress)).call.apply(e,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"$compid__106\",\"$compid__107\",\"$compid__108\",\"$compid__109\",\"$compid__110\",\"$compid__111\",\"$compid__112\",\"$compid__113\",\"styles\",\"visiable\",\"isDefault\",\"id\",\"cityData\",\"isPhone\",\"phone\",\"receiver\",\"house\",\"globalStore\"],m.getDetail=function(e){v.default.address.getDetail({\"id\":e}).then(function(e){e&&m.setState({\"receiver\":e.receiver,\"phone\":e.phone,\"isDefault\":e.isDefault,\"house\":e.house,\"area\":e.province+\"/\"+e.city+\"/\"+e.area,\"cityData\":[{\"areaName\":e.province,\"areaCode\":e.provinceId},{\"areaName\":e.city,\"areaCode\":e.cityId},{\"areaName\":e.area,\"areaCode\":e.areaId}]})})},m.onSubmit=function(e){var r=m.props.globalStore,t=m.$router.params,o=t.backUrl,a=void 0===o?\"\":o,i=t.first,n=m.state,s=n.isPhone,d=n.isDefault,u=n.cityData,c=n.id,l=n.receiver,_=n.phone,p=n.house;if(l)if(s&&_)if(u.length<3)y.message.error(\"请选择正确的省市区\");else if(p){var f={\"id\":c||\"\",\"receiver\":l,\"phone\":_,\"provinceId\":u[0].areaCode,\"province\":u[0].areaName,\"cityId\":u[1].areaCode,\"city\":u[1].areaName,\"areaId\":u[2].areaCode,\"area\":u[2].areaName,\"isDefault\":d,\"house\":p};v.default.address.addAddress(f).then(function(e){e&&(y.message.success(c?\"修改成功\":\"添加成功\"),setTimeout(function(){var e=m.$router.params;delete e.id;var t=\"?\";for(var o in e)t+=o+\"=\"+e[o];if(0<a.indexOf(\"submission\")&&\"1\"==i){var n=y.Common.clone(f);return n.streetId=\"\",r.setData(\"checkAddress\",Object.assign({},n),\"edit-address.jsx,line:113\"),h.default.reLaunch({\"url\":\"/pages/submission/submission\"+t}),!1}h.default.reLaunch({\"url\":\"/pages/address/address\"+t})},1e3))})}else y.message.error(\"请填详细的地址\");else y.message.error(\"请填写正确的手机号码\");else y.message.error(\"请填写收件人\")},m.changeMoren=function(e){m.setState({\"isDefault\":e})},m.getInput=function(e,t){m.setState(function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{\"value\":o,\"enumerable\":!0,\"configurable\":!0,\"writable\":!0}):e[t]=o,e}({},t,e),function(){\"phone\"===t&&m.setState({\"isPhone\":/^1\\d{10}$/.test(e)})})},m.delAddress=function(){m.setState({\"visiable\":!0})},m.cancle=function(){m.setState({\"visiable\":!1})},m.ok=function(){var e=m.state.id;v.default.address.deleteAddress({\"id\":e}).then(function(e){if(e){var t=m.$router.params;delete t.id;var o=\"?\";for(var n in t)o+=n+\"=\"+t[n];h.default.reLaunch({\"url\":\"/pages/address/address\"+o})}})},m.AreaPickerChange=function(e,t){m.setState({\"cityData\":t})},m.config={\"navigationBarTitleText\":\"编辑地址\"},m.customComponents=[\"Dialog\",\"AtForm\",\"AtInput\",\"AreaPicker\",\"AtTextarea\",\"AtSwitch\",\"AtButton\"],_possibleConstructorReturn(m,t)}t.default=d,Component(o(0).default.createComponent(d,!0))},\"292\":function(e,t,o){\"use strict\";o.r(t);o(293);var n=o(100);for(var r in n)\"default\"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r)},\"293\":function(e,t,o){\"use strict\";o(180)},\"294\":function(e,t,o){e.exports={\"edit_box\":\"edit-address-module__edit_box___3ITcY\",\"moren\":\"edit-address-module__moren___3FjyY\",\"switch\":\"edit-address-module__switch___3fbwI\",\"area_content\":\"edit-address-module__area_content___yUXXq\",\"icon_arrow\":\"edit-address-module__icon_arrow___1e8Iv\",\"area_box\":\"edit-address-module__area_box___mNfjw\",\"show_area_box\":\"edit-address-module__show_area_box___27XWE\",\"grayText\":\"edit-address-module__grayText___3KLz3\",\"button_box\":\"edit-address-module__button_box___X4Wz2\",\"del_address\":\"edit-address-module__del_address___2tZd8\",\"addressContainer\":\"edit-address-module__addressContainer___3ZU5D\",\"addressTitle\":\"edit-address-module__addressTitle___1HC90\",\"textarea\":\"edit-address-module__textarea___1bxhb\"}}},[[292,0,1,2,3]]]);","extractedComments":[]}