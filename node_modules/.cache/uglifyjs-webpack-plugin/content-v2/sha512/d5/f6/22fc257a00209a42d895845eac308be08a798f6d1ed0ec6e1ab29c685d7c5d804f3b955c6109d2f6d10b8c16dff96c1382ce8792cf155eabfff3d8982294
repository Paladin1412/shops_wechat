{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[58],{\"16\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r,i,a,f=_interopRequireDefault(o(0)),g=o(3),u=_interopRequireDefault(o(1)),_=_interopRequireDefault(o(2)),l=_interopRequireDefault(o(6)),s=_interopRequireDefault(o(4)),c=_interopRequireDefault(o(255));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var p=(0,u.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(PreLogin,f.default.Component),n(PreLogin,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if(\"value\"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0})(PreLogin.prototype.__proto__||Object.getPrototypeOf(PreLogin.prototype),\"_constructor\",this).call(this,e),this.state={},s.default.appUtils.delay(this,[\"wechatLogin\"]),this.$$refs=new f.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){f.default.showShareMenu({\"withShareTicket\":!0}),f.default.updateShareMenu({\"withShareTicket\":!0})}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){this.__state=e||this.state||{},this.__props=t||this.props||{},this.$prefix;var n=s.default.appUtils.getFileUrl(l.default.register.logoF,{\"w\":196}),r=s.default.appUtils.getFileUrl(l.default.register.desc,{\"w\":369}),i=s.default.appUtils.getFileUrl(l.default.register.guideMan,{\"w\":500});return Object.assign(this.__state,{\"anonymousState__temp\":n,\"anonymousState__temp2\":r,\"anonymousState__temp3\":i,\"styles\":c.default}),this.__state}}]),a=i=PreLogin,i.$$events=[\"wechatLogin\",\"gotoBack\"],i.$$componentPath=\"pages/login-guide/login-guide\",r=a))||r;function PreLogin(){var e,t,p;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,PreLogin);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=p=_possibleConstructorReturn(this,(e=PreLogin.__proto__||Object.getPrototypeOf(PreLogin)).call.apply(e,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"styles\",\"globalStore\"],p.wechatLogin=function(e){var i=e.detail;if(i.userInfo){var a=p.props.globalStore,t=a.data,u=t.userInfo,l=t.envUserInfo,o=p.$router.params,s=g.Common.queryString(o||{}),c=\"kxp-c\";f.default.login({\"success\":function success(r){p.logger({\"logs\":\"微信授权登录获取jsCode\",\"api_res\":JSON.stringify(r.code)}),r&&r.code&&_.default.login.postCode({\"jsCode\":r.code,\"source\":c}).then(function(e){if(p.logger({\"logs\":\"获取openid\",\"api_url\":\"/userservice/wechat/jsCode\",\"api_req\":JSON.stringify({\"jsCode\":r.code,\"source\":c}),\"api_res\":JSON.stringify(e.data)}),e&&e.data){var t=e.data,o=i.userInfo,n={\"headImgUrl\":o.avatarUrl,\"nickName\":o.nickName,\"openId\":t.openId,\"mobilePhone\":t.phone,\"shopId\":u.shopId||\"\",\"source\":c,\"unionId\":\"\",\"userInfoEcryptData\":i.encryptedData,\"userInfoIv\":i.iv};Object.assign(l,n),a.setData(\"envUserInfo\",l,\"login-guide.jsx,line:60\"),t.openId?f.default.navigateTo({\"url\":\"/pages/pre-login/pre-login\"+(s?\"?\"+s:\"\")}):g.message.warn(\"未获取到用户openId,请重新授权登录\")}})},\"fail\":function fail(e){p.logger({\"logs\":\"小程序登录失败***\"+JSON.stringify(e)})}})}else g.message.warn(\"授权失败,为更好的体验康小铺系统,请重新授权\")},p.onShareAppMessage=function(e){return p.logger({\"logs\":\"C端分享\"}),{\"title\":\"价低品全质优省事\",\"path\":\"/pages/login-guide/login-guide?companyId=\"+p.getCompanyId(),\"imageUrl\":l.default.common.share_logo,\"success\":function success(e){e.errMsg},\"fail\":function fail(){\"shareAppMessage:fail cancel\"==res.errMsg||res.errMsg},\"complete\":function complete(){}}},p.gotoBack=function(){f.default.redirectTo({\"url\":\"/pages/home/home\"})},p.config={\"navigationBarTitleText\":\"登录\"},p.customComponents=[],_possibleConstructorReturn(p,t)}t.default=p,Component(o(0).default.createComponent(p,!0))},\"168\":function(e,t,o){e.exports=o.p+\"pages/login-guide/login-guide.wxml\"},\"253\":function(e,t,o){\"use strict\";o.r(t);o(254);var n=o(90);for(var r in n)\"default\"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r)},\"254\":function(e,t,o){\"use strict\";o(168)},\"255\":function(e,t,o){e.exports={\"reset_btn\":\"login-guide-module__reset_btn___1cAB2\",\"prelogin_container\":\"login-guide-module__prelogin_container___3kHLt\",\"logo\":\"login-guide-module__logo___1CE4s\",\"label\":\"login-guide-module__label___2NA-F\",\"wechat_btn\":\"login-guide-module__wechat_btn___1XXF4\",\"icon\":\"login-guide-module__icon___3gjl0\",\"text\":\"login-guide-module__text___17toa\",\"guideMan\":\"login-guide-module__guideMan___mzPuA\",\"returnBtn\":\"login-guide-module__returnBtn___34Bxb\"}},\"90\":function(e,t,o){\"use strict\";o.r(t);var n=o(16),r=o.n(n);for(var i in n)\"default\"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t.default=r.a}},[[253,0,1,2,3]]]);","extractedComments":[]}