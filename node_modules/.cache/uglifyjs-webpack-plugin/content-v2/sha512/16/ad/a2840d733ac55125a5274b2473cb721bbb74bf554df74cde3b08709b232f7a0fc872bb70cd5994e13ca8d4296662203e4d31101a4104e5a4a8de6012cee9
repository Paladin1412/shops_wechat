{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[68],{\"121\":function(e,t,i){\"use strict\";i.r(t);var o=i(46),n=i.n(o);for(var l in o)\"default\"!==l&&function(e){i.d(t,e,function(){return o[e]})}(l);t.default=n.a},\"201\":function(e,t,i){e.exports=i.p+\"pages/prelive/prelive.wxml\"},\"356\":function(e,t,i){\"use strict\";i.r(t);i(357);var o=i(121);for(var n in o)\"default\"!==n&&function(e){i.d(t,e,function(){return o[e]})}(n)},\"357\":function(e,t,i){\"use strict\";i(201)},\"358\":function(e,t,i){e.exports={\"pre_imgMes\":\"prelive-module__pre_imgMes___27Yhv\",\"pre_img_detail\":\"prelive-module__pre_img_detail___1XmHi\",\"liveLeftText\":\"prelive-module__liveLeftText___2z8CG\",\"liveLeftText_livemes\":\"prelive-module__liveLeftText_livemes___1PPdx\",\"imgStyle\":\"prelive-module__imgStyle___2u_d6\",\"liveText\":\"prelive-module__liveText___hP21v\",\"pre_time\":\"prelive-module__pre_time___2whEZ\",\"pre_time_button\":\"prelive-module__pre_time_button___1xZ5x\",\"liveRight\":\"prelive-module__liveRight___280ks\",\"liveRightText\":\"prelive-module__liveRightText___1cIcm\",\"top_box\":\"prelive-module__top_box___3q2je\",\"top_inner\":\"prelive-module__top_inner___2A0If\",\"font\":\"prelive-module__font___3dR3n\",\"back_img\":\"prelive-module__back_img___uhGSI\",\"go_back_icon\":\"prelive-module__go_back_icon___1ghBt\",\"top_box_active\":\"prelive-module__top_box_active___12e6I\",\"shop_list\":\"prelive-module__shop_list___32ryO\",\"live_style_top\":\"prelive-module__live_style_top___1Ip3K\",\"live_shop_mes\":\"prelive-module__live_shop_mes___1Cllu\",\"box_height\":\"prelive-module__box_height___3TKlK\",\"box_Top\":\"prelive-module__box_Top___3LvMp\",\"head_top\":\"prelive-module__head_top___3CAAa\",\"head_left\":\"prelive-module__head_left___yLBFy\",\"head_left_img\":\"prelive-module__head_left_img___6CBTe\",\"head_right\":\"prelive-module__head_right___3xO2a\",\"head_bottom\":\"prelive-module__head_bottom___2BUO2\",\"live_line\":\"prelive-module__live_line___R4pkP\",\"live_title\":\"prelive-module__live_title___fCUVN\",\"share_item_style\":\"prelive-module__share_item_style___3ndz3\",\"share_item_Button\":\"prelive-module__share_item_Button___2NtIo\",\"share_item_Button_enter\":\"prelive-module__share_item_Button_enter___2Jvbh\",\"shareButton\":\"prelive-module__shareButton___2LqiM\",\"eveInner\":\"prelive-module__eveInner___1TX3d\",\"leftInner\":\"prelive-module__leftInner___3FgRe\",\"leftInnerImg\":\"prelive-module__leftInnerImg___3wzt2\",\"RightInner\":\"prelive-module__RightInner___3ppT1\",\"priceInner\":\"prelive-module__priceInner___3i_dG\",\"titleInner\":\"prelive-module__titleInner___3JRUm\",\"priLogo\":\"prelive-module__priLogo___1-NrK\",\"priStyle\":\"prelive-module__priStyle___2U7zo\",\"botStyle\":\"prelive-module__botStyle___1PWrg\",\"pointstyle\":\"prelive-module__pointstyle___zlFT2\",\"point\":\"prelive-module__point___-bWru\",\"editorMes\":\"prelive-module__editorMes___X_27V\",\"delItem\":\"prelive-module__delItem___lPPSZ\",\"downItem\":\"prelive-module__downItem___2LKeK\",\"ediItem\":\"prelive-module__ediItem___3Y438\",\"sharePrice\":\"prelive-module__sharePrice___1-BLp\",\"twoButton\":\"prelive-module__twoButton___nbYMl\",\"getButton\":\"prelive-module__getButton___1Ju8z\"}},\"46\":function(e,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var S=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var i=[],o=!0,n=!1,l=void 0;try{for(var r,_=e[Symbol.iterator]();!(o=(r=_.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,l=e}finally{try{!o&&_.return&&_.return()}finally{if(n)throw l}}return i}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},o=function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e};function defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n,l,r,b=i(0),a=_interopRequireDefault(b),_=i(4),T=_interopRequireDefault(_),u=_interopRequireDefault(i(1)),s=_interopRequireDefault(i(2)),x=_interopRequireDefault(i(6)),w=_interopRequireDefault(i(13)),M=_interopRequireDefault(i(358));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var p=(0,u.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Prelive,a.default.Component),o(Prelive,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,i)}if(\"value\"in o)return o.value;var l=o.get;return void 0!==l?l.call(i):void 0})(Prelive.prototype.__proto__||Object.getPrototypeOf(Prelive.prototype),\"_constructor\",this).call(this,e),this.state={\"buttonTop\":\"\",\"buttonHeight\":\"\",\"shopList\":[1,2,3,4,5,6],\"showTop\":!1,\"liveId\":this.$router.params.liveId,\"mark\":\"\",\"liveDetail\":\"\",\"companyMes\":\"\",\"timeCount\":\"\",\"liveMes\":\"\",\"liveHad\":\"\",\"isLiveOrRedirectLive\":this.$router.params.isLiveOrRedirectLive},_.appUtils.delay(this,[\"goItemlive\"]),this.$$refs=new a.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){clearInterval(this.timeMes)}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){a.default.showShareMenu({\"withShareTicket\":!0}),a.default.updateShareMenu({\"withShareTicket\":!0});var e=a.default.getMenuButtonBoundingClientRect(),t=e.top,i=e.height,o=this;o.setState({\"buttonTop\":t,\"buttonHeight\":i},function(){o.findDetail(),o.getCompanyCode(),o.memberStatistics(),o.queryStreamStatus()})}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,i){this.__state=e||this.state||{},this.__props=t||this.props||{};var _=this.$prefix,o=this.__state,n=o.buttonTop,l=o.buttonHeight,r=o.shopList,a=this.__state,u=a.liveDetail,s=a.companyMes,p=(a.timeCount,a.liveMes),m=(0,b.internal_inline_style)({\"marginTop\":n+\"px\",\"height\":l+\"px\"}),v=T.default.appUtils.getFileUrl(x.default.common.go_back,{\"w\":64}),c=T.default.appUtils.getFileUrl(u.adverImgUrl),d=(0,b.internal_inline_style)({\"top\":n+l+34+\"px\"}),f=1==u.liveStatus?w.default.formatDateTime(u.startTime):null,h=1==u.liveStatus?(0,b.internal_inline_style)({\"top\":n+l+160+\"px\"}):null,g=T.default.appUtils.getFileUrl(s.logo||x.default.goods.defalutHead),y=(0,b.internal_inline_style)({\"paddingBottom\":\"140px\"});this.anonymousFunc0=0==p?this.goItemlive:null;var I=(r||[]).map(function(e,t){e={\"$original\":(0,b.internal_get_original)(e)};var i=T.default.appUtils.getFileUrl(e.$original.mainImgUrl)||x.default.home.backImage,o=(0,b.genCompid)(_+\"hgzzzzzzzz\"+t,!0),n=S(o,2),l=n[0],r=n[1];return b.propsManager.set({\"count\":2},r,l),{\"$loopState__temp10\":i,\"$compid__158\":r,\"$original\":e.$original}});return Object.assign(this.__state,{\"anonymousState__temp\":m,\"anonymousState__temp2\":v,\"anonymousState__temp3\":c,\"anonymousState__temp4\":d,\"anonymousState__temp5\":f,\"anonymousState__temp6\":h,\"anonymousState__temp7\":g,\"anonymousState__temp8\":y,\"loopArray58\":I,\"styles\":M.default,\"Assets\":x.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}}]),r=l=Prelive,l.$$events=[\"goIndex\",\"onScroll\",\"anonymousFunc0\"],l.$$componentPath=\"pages/prelive/prelive\",n=r))||n;function Prelive(){var e,t,_;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Prelive);for(var i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=_=_possibleConstructorReturn(this,(e=Prelive.__proto__||Object.getPrototypeOf(Prelive)).call.apply(e,[this].concat(o)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"anonymousState__temp4\",\"anonymousState__temp5\",\"anonymousState__temp6\",\"anonymousState__temp7\",\"anonymousState__temp8\",\"loopArray58\",\"styles\",\"showTop\",\"liveDetail\",\"Assets\",\"liveHad\",\"shopList\",\"liveMes\",\"timeCount\",\"companyMes\",\"buttonTop\",\"buttonHeight\",\"liveId\",\"mark\",\"isLiveOrRedirectLive\"],_.getCompanyCode=function(){s.default.inviter.userCode().then(function(e){e&&_.setState({\"mark\":e.invitationCode})})},_.onShareAppMessage=function(e){_.logger({\"logs\":\"C端分享\"});var t=_.state,i=(t.companyMes,t.mark),o=t.liveDetail,n=t.liveId,l=t.isLiveOrRedirectLive,r=_.getCompanyId();return{\"title\":o.name,\"path\":\"/pages/prelive/prelive?companyId=\"+r+\"&liveId=\"+n+\"&mark=\"+i+\"&isLiveOrRedirectLive=\"+l,\"imageUrl\":T.default.appUtils.getFileUrl(o.adverImgUrl),\"success\":function success(e){\"shareAppMessage:ok\"==e.errMsg&&console.log(\"转发成功\")},\"fail\":function fail(){\"shareAppMessage:fail cancel\"==res.errMsg||res.errMsg},\"complete\":function complete(){}}},_.findDetail=function(){var e=_.state,t={\"liveId\":e.liveId};e.isLiveOrRedirectLive?s.default.liveapi.getReservationLiveDetailForRedirect(t).then(function(e){var t=_;e&&t.setState({\"liveDetail\":e.liveBroadcastVO,\"shopList\":e.recommendItemVOList},function(){var e=t.state.liveDetail;1==e.liveStatus&&(t.timeMes=setInterval(function(){t.countItem(e.startTime)},1e3))})}):s.default.liveapi.getReservationLiveDetail(t).then(function(e){var t=_;e&&t.setState({\"liveDetail\":e.liveBroadcastVO,\"shopList\":e.recommendItemVOList},function(){var e=t.state.liveDetail;1==e.liveStatus&&(t.timeMes=setInterval(function(){t.countItem(e.startTime)},1e3))})})},_.memberStatistics=function(){var e={\"companyId\":_.getCompanyId()};s.default.goods.shopBaseInfo(e).then(function(e){e&&_.setState({\"companyMes\":e})})},_.queryLiveItems=function(e){var t={\"liveId\":e};s.default.liveapi.queryLiveItems(t).then(function(e){e&&_.setState({\"goodsList\":e})})},_.queryStreamStatus=function(){var e={\"liveId\":_.state.liveId},t=_;s.default.liveapi.queryStreamStatus(e).then(function(e){if(!e)return!1;t.setState({\"liveMes\":e})})},_.goItemlive=function(){var e=_.state.liveDetail;a.default.navigateTo({\"url\":\"/pages/golive/golive?liveId=\"+e.id})},_.onScroll=function(e){100<e.detail.scrollTop?_.setState({\"showTop\":!0}):_.setState({\"showTop\":!1})},_.shareItem=function(e,t){var i=_.getCompanyId();2===t?a.default.navigateTo({\"url\":\"/pages/goodsdetail/goodsdetail?agentItemId=\"+e.id+\"&itemId=\"+e.itemId+\"&companyId=\"+(i||a.default.getStorageSync(\"userInfo\").companyId)}):_.setState({\"isOpenShare\":!0})},_.countItem=function(e){var t,i,o,n,l=e-(new Date).getTime();0<=l?(0<=l&&(t=Math.floor(l/1e3/60/60/24),i=Math.floor(l/1e3/60/60%24),o=Math.floor(l/1e3/60%60),n=Math.floor(l/1e3%60)),t=_.checkTime(t),i=_.checkTime(i),o=_.checkTime(o),n=_.checkTime(n),console.log(t+\"天\"+i+\"时\"+o+\"分\"+n+\"秒\"),_.setState({\"timeCount\":t+\"天\"+i+\"时\"+o+\"分\"+n+\"秒\",\"liveHad\":1})):_.setState({\"liveHad\":0})},_.checkTime=function(e){return e<10&&(e=\"0\"+e),e},_.goIndex=function(){a.default.switchTab({\"url\":\"/pages/index/index\"})},_.config={\"navigationStyle\":\"custom\",\"navigationBarTextStyle\":\"white\"},_.customComponents=[\"Ellipsis\"],_possibleConstructorReturn(_,t)}t.default=p,Component(i(0).default.createComponent(p,!0))}},[[356,0,1,2,3]]]);","extractedComments":[]}