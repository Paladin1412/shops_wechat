{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[64],{\"102\":function(e,t,n){\"use strict\";n.r(t);var o=n(33),r=n.n(o);for(var a in o)\"default\"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t.default=r.a},\"175\":function(e,t,n){e.exports=n.p+\"pages/personinfo/personinfo.wxml\"},\"33\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,a,i,c=n(1),s=_interopRequireDefault(c),u=n(5),f=_interopRequireDefault(n(2)),l=n(3),_=_interopRequireDefault(l),d=_interopRequireDefault(n(4)),m=_interopRequireDefault(n(421));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var h=(0,f.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Personinfo,s.default.Component),o(Personinfo,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if(\"value\"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(Personinfo.prototype.__proto__||Object.getPrototypeOf(Personinfo.prototype),\"_constructor\",this).call(this,e),this.state={\"formData\":{}},this.onChangeInput=d.default.formHandlerChange(this),this.$$refs=new s.default.RefsArray}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this.props.globalStore.data.userInfo;this.setState({\"formData\":{\"headImg\":e.headImg,\"nickName\":e.nickName}})}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){var o=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var r=this.$prefix,a=(0,c.genCompid)(r+\"$compid__91\"),i=p(a,2),s=i[0],u=i[1],f=this.__state.formData,l=d.default.getFileUrl(f.headImg);return this.anonymousFunc0=function(e){return o.onChangeInput(e,\"nickName\")},c.propsManager.set({\"className\":m.default.upload,\"onChange\":this.onChangeUpload},u,s),Object.assign(this.__state,{\"anonymousState__temp\":l,\"$compid__91\":u,\"styles\":m.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}}]),i=a=Personinfo,a.$$events=[\"anonymousFunc0\",\"onSave\"],a.$$componentPath=\"pages/personinfo/personinfo\",r=i))||r;function Personinfo(){var e,t,r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Personinfo);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=r=_possibleConstructorReturn(this,(e=Personinfo.__proto__||Object.getPrototypeOf(Personinfo)).call.apply(e,[this].concat(o)))).$usedState=[\"anonymousState__temp\",\"$compid__91\",\"styles\",\"formData\",\"globalStore\"],r.onChangeUpload=function(e){var t=e[0].file,n=t.size;return 0!==t.type.indexOf(\"image\")?u.message.warn(\"请上传图片文件\"):5242880<n?u.message.warn(\"请上传5M以内的图片\"):(u.message.loading(\"正在上传\"),void s.default.uploadFile({\"url\":_.default.common.upload(),\"name\":\"file\",\"filePath\":t.path,\"header\":(0,l.getFetchHeader)(),\"formData\":{\"extension\":t.type.replace(/.+\\//,\"\")}}).then(function(e){var t=JSON.parse(e.data);if(0!==t.responseCode)return u.message.warn(t.message);s.default.hideToast();var n=r.state.formData;n.headImg=t.entry.filePath,r.setState({\"formData\":n})}))},r.onSave=function(){var n=r.state.formData,o=r.props.globalStore,e=u.paramType.chain().add(\"headImg\").rule(\"required\",!0,\"请上传图片\").rule(\"string\").end().add(\"nickName\").rule(\"required\",!0,\"请填写昵称\").rule(\"string\").toConfig();(0,u.paramType)(n,e,u.message.warn)&&_.default.my.updateBaseInfo(n).then(function(e){if(e){var t=o.data.userInfo;Object.assign(t,n),o.setData(\"userInfo\",t),u.message.success(\"操作成功\")}})},r.config={\"navigationBarTitleText\":\"修改个人资料\"},r.customComponents=[\"AtImagePicker\"],_possibleConstructorReturn(r,t)}t.default=h,Component(n(1).default.createComponent(h,!0))},\"419\":function(e,t,n){\"use strict\";n.r(t);n(420);var o=n(102);for(var r in o)\"default\"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r)},\"420\":function(e,t,n){\"use strict\";n(175)},\"421\":function(e,t,n){e.exports={\"container\":\"personinfo-module__container___tnUzl\",\"list\":\"personinfo-module__list_____tag\",\"head\":\"personinfo-module__head___7qWXL\",\"nick\":\"personinfo-module__nick___zHfky\",\"head_img\":\"personinfo-module__head_img___2Kv6u\",\"user_photo\":\"personinfo-module__user_photo___1fnpk\",\"upload\":\"personinfo-module__upload___3U6Z_\",\"nickname\":\"personinfo-module__nickname___2uICq\",\"save_btn\":\"personinfo-module__save_btn___1-etr\"}}},[[419,0,1,2,3]]]);","extractedComments":[]}