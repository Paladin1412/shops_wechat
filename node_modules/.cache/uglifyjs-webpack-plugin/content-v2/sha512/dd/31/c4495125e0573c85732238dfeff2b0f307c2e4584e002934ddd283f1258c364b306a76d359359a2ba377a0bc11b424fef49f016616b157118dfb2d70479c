{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[66],{\"109\":function(e,t,n){\"use strict\";n.r(t);var o=n(34),r=n.n(o);for(var a in o)\"default\"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t.default=r.a},\"189\":function(e,t,n){e.exports=n.p+\"pages/personinfo/personinfo.wxml\"},\"319\":function(e,t,n){\"use strict\";n.r(t);n(320);var o=n(109);for(var r in o)\"default\"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r)},\"320\":function(e,t,n){\"use strict\";n(189)},\"321\":function(e,t,n){e.exports={\"container\":\"personinfo-module__container___tnUzl\",\"list\":\"personinfo-module__list_____tag\",\"cellTitle\":\"personinfo-module__cellTitle___3bgEA\",\"head_img\":\"personinfo-module__head_img___2Kv6u\",\"user_photo\":\"personinfo-module__user_photo___1fnpk\",\"upload\":\"personinfo-module__upload___3U6Z_\",\"nickname\":\"personinfo-module__nickname___2uICq\",\"icon\":\"personinfo-module__icon___M3FyX\"}},\"34\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,a,i,p=n(0),s=_interopRequireDefault(p),u=n(3),f=_interopRequireDefault(n(1)),c=n(2),_=_interopRequireDefault(c),d=_interopRequireDefault(n(4)),m=_interopRequireDefault(n(321));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var h=(0,f.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Personinfo,s.default.Component),o(Personinfo,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if(\"value\"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(Personinfo.prototype.__proto__||Object.getPrototypeOf(Personinfo.prototype),\"_constructor\",this).call(this,e),this.state={\"formData\":{}},this.$$refs=new s.default.RefsArray}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){var e=this.props.globalStore.data.userInfo;this.setState({\"formData\":{\"headImg\":e.headImg,\"nickName\":e.nickName}})}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){this.__state=e||this.state||{},this.__props=t||this.props||{};var o=this.$prefix,r=(0,p.genCompid)(o+\"$compid__122\"),a=l(r,2),i=a[0],s=a[1],u=this.__state.formData,f=d.default.appUtils.getFileUrl(u.headImg);return p.propsManager.set({\"className\":m.default.upload,\"onChange\":this.onChangeUpload},s,i),Object.assign(this.__state,{\"anonymousState__temp\":f,\"$compid__122\":s,\"styles\":m.default}),this.__state}}]),i=a=Personinfo,a.$$events=[\"enterEdit\"],a.$$componentPath=\"pages/personinfo/personinfo\",r=i))||r;function Personinfo(){var e,t,a;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Personinfo);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=a=_possibleConstructorReturn(this,(e=Personinfo.__proto__||Object.getPrototypeOf(Personinfo)).call.apply(e,[this].concat(o)))).$usedState=[\"anonymousState__temp\",\"$compid__122\",\"styles\",\"formData\",\"globalStore\"],a.onChangeUpload=function(e){var t=e[0].file,n=t.size,o=t.path.split(\".\"),r=o[o.length-1];if(5242880<n)return u.message.warn(\"请上传5M以内的图片\");u.message.loading(\"正在上传\"),s.default.uploadFile({\"url\":_.default.common.upload(),\"name\":\"file\",\"filePath\":t.path,\"header\":(0,c.getFetchHeader)(),\"formData\":{\"extension\":r}}).then(function(e){var t=JSON.parse(e.data);if(0!==t.responseCode)return u.message.warn(t.message);s.default.hideToast();var n=a.state.formData;n.headImg=t.entry.filePath,a.setState({\"formData\":n},function(){a.onSave()})})},a.enterEdit=function(){s.default.navigateTo({\"url\":\"/pages/edit-info/edit-info\"})},a.onSave=function(){var e=a.state.formData,n=a.props.globalStore,t=u.paramType.chain().add(\"headImg\").rule(\"required\",!0,\"请上传图片\").rule(\"string\").end().toConfig();if((0,u.paramType)(e,t,u.message.warn)){var o={\"headImg\":e.headImg};_.default.my.updateBaseInfo(o).then(function(e){if(e){var t=n.data.userInfo;Object.assign(t,o),n.setData(\"userInfo\",t,\"personinfo.jsx,line:103\"),u.message.success(\"操作成功\")}})}},a.config={\"navigationBarTitleText\":\"个人资料\"},a.customComponents=[\"AtImagePicker\"],_possibleConstructorReturn(a,t)}t.default=h,Component(n(0).default.createComponent(h,!0))}},[[319,0,1,2,3]]]);","extractedComments":[]}