{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[59],{\"106\":function(e,t,o){\"use strict\";o.r(t);var n=o(37),r=o.n(n);for(var a in n)\"default\"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t.default=r.a},\"179\":function(e,t,o){e.exports=o.p+\"pages/my-order/my-order.wxml\"},\"37\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var C=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],n=!0,r=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(o.push(u.value),!t||o.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r,a,u,A=o(1),R=_interopRequireDefault(A),i=o(5),s=_interopRequireDefault(o(2)),P=o(4),d=_interopRequireDefault(o(3)),j=_interopRequireDefault(o(433));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var l=(0,s.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MyOrder,R.default.Component),n(MyOrder,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if(\"value\"in n)return n.value;var a=n.get;return void 0!==a?a.call(o):void 0})(MyOrder.prototype.__proto__||Object.getPrototypeOf(MyOrder.prototype),\"_constructor\",this).call(this,e),this.state={\"type\":0,\"tabList\":[{\"title\":\"全部\",\"type\":-1},{\"title\":\"待支付\",\"type\":0},{\"title\":\"待发货\",\"type\":1},{\"title\":\"待收货\",\"type\":2},{\"title\":\"已完成\",\"type\":3},{\"title\":\"已关闭\",\"type\":4},{\"title\":\"退换货\",\"type\":6}],\"buyList\":[{\"title\":\"自购\",\"type\":0},{\"title\":\"分享购\",\"type\":1}],\"isLoaded\":!1,\"error\":!1,\"hasMore\":!0,\"isEmpty\":!1,\"list\":[],\"screenHeight\":\"\",\"buyType\":0,\"isShow\":!1,\"pageNum\":1,\"shopLevel\":1,\"sureModal\":!1,\"checkNo\":\"\",\"actionType\":\"\"},this.$$refs=new R.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=R.default.getStorageSync(\"userInfo\")||{};this.getShopMemberLevel(e.shopId)}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){var c=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var n=this.$prefix,r=(0,A.genCompid)(n+\"$compid__93\"),a=C(r,2),u=a[0],i=a[1],s=(0,A.genCompid)(n+\"$compid__94\"),l=C(s,2),_=l[0],y=l[1],p=(0,A.genCompid)(n+\"$compid__95\"),d=C(p,2),m=d[0],f=d[1],h=this.__state,g=h.isLoaded,v=(h.error,h.hasMore),b=h.isEmpty,F=h.list,M=(h.screenHeight,h.type),S=h.tabList,$=(h.buyType,h.buyList),x=h.isShow,k=h.shopLevel,w=h.sureModal,T=(h.checkNo,h.actionType),O=x?{\"launchEmpty\":!0}:null,D=x?j.default.scroll_content+\" \"+(2===k?j.default.scroll_content_vip:j.default.scroll_content_def):null;this.anonymousFunc6=function(){return c.setState({\"sureModal\":!1})},this.anonymousFunc7=function(){return c.setState({\"sureModal\":!1})},this.anonymousFunc8=function(){return c.setaction()};var L=\"确定\"+T+\"吗\",N=2===k?$.map(function(e,t){e={\"$original\":(0,A.internal_get_original)(e)};var o=\"fazzz\"+t;return c.anonymousFunc0Map[o]=function(){return c.setType(e.$original.type)},{\"_$indexKey\":o,\"$original\":e.$original}}):[],z=x?F.map(function(e,t){e={\"$original\":(0,A.internal_get_original)(e)};var o=x?R.default.getStorageSync(\"userInfo\").shopName:null,n=\"fczzz\"+t;c.anonymousFunc1Map[n]=function(){return c.goDetail(e.$original.orderNo,e.$original.afterSaleNo)};var r=x?(0,P.getFileUrl)(e.$original.skuImg):null,a=x?(0,P.formatPoint)(e.$original.skuPrice*e.$original.count):null,u=\"fdzzz\"+t;c.anonymousFunc2Map[u]=function(){return P.orderPay.Opay(e.$original.orderNo)};var i=\"fezzz\"+t;c.anonymousFunc3Map[i]=function(){return c.goRefund(2,e.$original.orderNo)};var s=\"ffzzz\"+t;c.anonymousFunc4Map[s]=function(){return c.goRefund(1,e.$original.orderNo)};var l=\"fgzzz\"+t;return c.anonymousFunc5Map[l]=function(){return c.setState({\"sureModal\":!0,\"checkNo\":e.$original.orderNo,\"actionType\":\"收货\"})},{\"$loopState__temp4\":o,\"_$indexKey2\":n,\"$loopState__temp6\":r,\"$loopState__temp8\":a,\"_$indexKey3\":u,\"_$indexKey4\":i,\"_$indexKey5\":s,\"_$indexKey6\":l,\"$original\":e.$original}}):[];return A.propsManager.set({\"current\":M,\"scroll\":!0,\"tabList\":S,\"onClick\":this.handleClick},i,u),x&&A.propsManager.set({\"isLoaded\":g,\"hasMore\":v,\"isEmpty\":b,\"launch\":O,\"onScrollToLower\":this.onScrollToLower,\"onPullDownRefresh\":this.onPullDownRefresh,\"className\":D},y,_),A.propsManager.set({\"isOpened\":w,\"title\":!1,\"cancelText\":\"取消\",\"confirmText\":\"是的\",\"onClose\":this.anonymousFunc6,\"onCancel\":this.anonymousFunc7,\"onConfirm\":this.anonymousFunc8,\"content\":L},f,m),this.$$refs.pushRefs([{\"type\":\"component\",\"id\":\"fbzzz\",\"refName\":\"\",\"fn\":function fn(e){return c.scrollV=e}}]),Object.assign(this.__state,{\"anonymousState__temp\":O,\"anonymousState__temp2\":D,\"anonymousState__temp9\":L,\"loopArray37\":N,\"loopArray38\":z,\"$compid__93\":i,\"$compid__94\":y,\"$compid__95\":f,\"styles\":j.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc0Map[e]&&(t=this.anonymousFunc0Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc1Map[e]&&(t=this.anonymousFunc1Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc2\",\"value\":function anonymousFunc2(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc2Map[e]&&(t=this.anonymousFunc2Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc3\",\"value\":function anonymousFunc3(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc3Map[e]&&(t=this.anonymousFunc3Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc4\",\"value\":function anonymousFunc4(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc4Map[e]&&(t=this.anonymousFunc4Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc5\",\"value\":function anonymousFunc5(e){for(var t,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc5Map[e]&&(t=this.anonymousFunc5Map)[e].apply(t,n)}},{\"key\":\"anonymousFunc6\",\"value\":function anonymousFunc6(){}},{\"key\":\"anonymousFunc7\",\"value\":function anonymousFunc7(){}},{\"key\":\"anonymousFunc8\",\"value\":function anonymousFunc8(){}}]),u=a=MyOrder,a.$$events=[\"anonymousFunc0\",\"goIndex\",\"anonymousFunc1\",\"anonymousFunc2\",\"anonymousFunc3\",\"anonymousFunc4\",\"anonymousFunc5\"],a.$$componentPath=\"pages/my-order/my-order\",r=u))||r;function MyOrder(){var e,t,p;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,MyOrder);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=p=_possibleConstructorReturn(this,(e=MyOrder.__proto__||Object.getPrototypeOf(MyOrder)).call.apply(e,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp9\",\"loopArray37\",\"loopArray38\",\"$compid__93\",\"$compid__94\",\"$compid__95\",\"styles\",\"shopLevel\",\"buyType\",\"buyList\",\"isShow\",\"list\",\"type\",\"tabList\",\"isLoaded\",\"error\",\"hasMore\",\"isEmpty\",\"screenHeight\",\"pageNum\",\"sureModal\",\"checkNo\",\"actionType\"],p.getData=function(e){var t=e.pageNum,o=void 0===t?1:t,n=e.pageSize,r=void 0===n?4:n,a=e.callback,u=p.state,i=u.buyType,s=u.type,l=u.list,c=u.tabList,_=0===s?\"\":c[s].type,y={};y=6===s?{\"pageNum\":o,\"pageSize\":r,\"queryAfterSale\":6===s,\"invite\":1===i}:{\"pageNum\":o,\"pageSize\":r,\"orderStatus\":_,\"invite\":1===i},d.default.order.queryList(y).then(function(e){if(e){var t=l.concat(e.list);p.setState({\"isLoaded\":!0,\"isShow\":!0,\"list\":t,\"hasMore\":e.hasNextPage,\"pageNum\":o,\"isEmpty\":t.length<=0},function(){a&&a()})}})},p.onScrollToLower=function(e){var t=p.state.pageNum;t++,p.getData({\"pageNum\":t,\"callback\":e})},p.onPullDownRefresh=function(e){p.setState({\"list\":[]},function(){return p.getData({\"callback\":e})})},p.getShopMemberLevel=function(e){var t=p.$router.params.index;d.default.order.getShopMemberLevel({\"shopId\":e}).then(function(e){e&&p.setState({\"shopLevel\":e,\"type\":Number(t)},function(){return p.getData({})})})},p.setaction=function(){var e=p.state.actionType;\"删除\"===e?p.deleteOrder():\"收货\"===e&&p.receivedOrder()},p.deleteOrder=function(){var e=p.state.checkNo,t=p.$router.params.index;d.default.order.deleteOrder({\"orderNo\":e}).then(function(e){p.setState({\"sureModal\":!1}),e&&(i.message.success(\"已删除\"),R.default.navigateTo({\"url\":\"/pages/my-order/my-order?t=\"+(new Date).getTime()+\"&index=\"+t}))})},p.receivedOrder=function(e){var t=p.state.checkNo;d.default.order.receivedOrder({\"orderNo\":t}).then(function(e){!0===e&&(p.setState({\"sureModal\":!1}),i.message.success(\"已收货\"),setTimeout(function(){R.default.navigateTo({\"url\":\"/pages/my-order/my-order?t=\"+(new Date).getTime()+\"&index=3\"})},500))})},p.handleClick=function(e){p.setState({\"isShow\":!1,\"type\":e,\"list\":[]},function(){return p.getData({})})},p.goDetail=function(e,t){var o=p.state,n=o.buyType,r=o.shopLevel;if(1===n)return!1;R.default.navigateTo({\"url\":\"/pages/order-detail/order-detail?orderNo=\"+e+\"&afterSaleNo=\"+t+\"&shopLevel=\"+r})},p.setType=function(e){p.setState({\"buyType\":e,\"type\":0,\"isShow\":!1,\"list\":[]},function(){return p.getData({})})},p.goIndex=function(){var e=R.default.getStorageSync(\"userInfo\").companyId;R.default.navigateTo({\"url\":\"/pages/index/index?companyId=\"+e})},p.goRefund=function(e,t){var o=p.state.shopLevel;R.default.navigateTo({\"url\":\"/pages/after-sales/after-sales?type=\"+e+\"&orderNo=\"+t+\"&shopLevel=\"+o})},p.config={\"navigationBarTitleText\":\"我的订单\"},p.anonymousFunc0Map={},p.anonymousFunc1Map={},p.anonymousFunc2Map={},p.anonymousFunc3Map={},p.anonymousFunc4Map={},p.anonymousFunc5Map={},p.customComponents=[\"AtTabs\",\"ListView\",\"Empty\",\"AtModal\"],_possibleConstructorReturn(p,t)}t.default=l,Component(o(1).default.createComponent(l,!0))},\"431\":function(e,t,o){\"use strict\";o.r(t);o(432);var n=o(106);for(var r in n)\"default\"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r)},\"432\":function(e,t,o){\"use strict\";o(179)},\"433\":function(e,t,o){e.exports={\"order_content\":\"my-order-module__order_content___3xKQg\",\"product_box\":\"my-order-module__product_box___1hmlf\",\"title\":\"my-order-module__title___3A2Q5\",\"font\":\"my-order-module__font___1JDfL\",\"status_box\":\"my-order-module__status_box___jkZD4\",\"red\":\"my-order-module__red___9UZ1c\",\"info_box\":\"my-order-module__info_box___1iFRg\",\"img\":\"my-order-module__img___1AqCb\",\"info_right\":\"my-order-module__info_right___1HTHD\",\"info_title\":\"my-order-module__info_title___3gihT\",\"size_box\":\"my-order-module__size_box___2dcfg\",\"price_box\":\"my-order-module__price_box___EGXsC\",\"left\":\"my-order-module__left___awUsg\",\"num\":\"my-order-module__num___1KLA8\",\"recv\":\"my-order-module__recv___5RGHC\",\"right\":\"my-order-module__right___1ejpQ\",\"all_price\":\"my-order-module__all_price___2V_tg\",\"bottom_box\":\"my-order-module__bottom_box___1CF-J\",\"button_box\":\"my-order-module__button_box___1Tw_j\",\"button\":\"my-order-module__button___jnnHk\",\"wuliu\":\"my-order-module__wuliu___3t2Fo\",\"shouhuo\":\"my-order-module__shouhuo___3De_e\",\"gray_button\":\"my-order-module__gray_button___Y_0ky\",\"clock_box\":\"my-order-module__clock_box___Ju6zU\",\"list_content\":\"my-order-module__list_content___CzUua\",\"buy_type_box\":\"my-order-module__buy_type_box___3BsAZ\",\"item\":\"my-order-module__item___3-nCe\",\"active\":\"my-order-module__active___kpSn2\",\"grid_empty\":\"my-order-module__grid_empty___XStSb\",\"scroll_content\":\"my-order-module__scroll_content___2vYBd\",\"scroll_content_def\":\"my-order-module__scroll_content_def___3wBH3\",\"scroll_content_vip\":\"my-order-module__scroll_content_vip___1-S7X\"}}},[[431,0,1,2,3]]]);","extractedComments":[]}