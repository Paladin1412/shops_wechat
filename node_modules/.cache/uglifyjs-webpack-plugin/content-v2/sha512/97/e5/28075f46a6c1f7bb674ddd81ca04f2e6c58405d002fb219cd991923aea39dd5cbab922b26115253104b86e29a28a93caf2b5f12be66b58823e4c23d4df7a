{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[45],{\"173\":function(t,e,o){t.exports=o.p+\"pages/collect/collect.wxml\"},\"21\":function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{\"value\":!0});var $=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var o=[],n=!0,r=!1,l=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,l=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw l}}return o}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},n=function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t};function defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r,l,a,w=o(0),i=_interopRequireDefault(w),u=_interopRequireDefault(o(1)),c=_interopRequireDefault(o(2)),C=_interopRequireDefault(o(6)),D=_interopRequireDefault(o(269)),M=_interopRequireDefault(o(4)),s=_interopRequireDefault(o(11));function _interopRequireDefault(t){return t&&t.__esModule?t:{\"default\":t}}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}var _=(0,u.default)((function _inherits(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{\"constructor\":{\"value\":t,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Collect,i.default.Component),n(Collect,[{\"key\":\"_constructor\",\"value\":function _constructor(t){(function get(t,e,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:get(r,e,o)}if(\"value\"in n)return n.value;var l=n.get;return void 0!==l?l.call(o):void 0})(Collect.prototype.__proto__||Object.getPrototypeOf(Collect.prototype),\"_constructor\",this).call(this,t),this.state={\"list\":[],\"isLoaded\":!0,\"hasMore\":!1,\"isEmpty\":!1,\"screenHeight\":\"\",\"level\":\"1\"},this.$$refs=new i.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){var t=this,e=this.props.globalStore.data,o=e.systemInfo.screenHeight,n=e.userInfo;this.setState({\"list\":[],\"screenHeight\":o},function(){n.token&&t.getData({})}),n.token&&this.getLevel()}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){this.state.isEmpty&&this.setState({\"isEmpty\":!1})}},{\"key\":\"_createData\",\"value\":function _createData(t,e,o){var i=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var n=this.$prefix,r=(0,w.genCompid)(n+\"$compid__98\"),l=$(r,2),a=l[0],u=l[1],c=(0,w.genCompid)(n+\"$compid__99\"),s=$(c,2),_=s[0],p=s[1],d=this.__state,f=d.isLoaded,m=d.hasMore,y=d.isEmpty,g=d.list,h=d.screenHeight,v=(d.level,this.__props.globalStore.data.userInfo),b=v.token?{\"height\":h+\"px\"}:null,S=v.token?{\"launchEmpty\":!0}:null,I=v.token?(0,w.internal_inline_style)({\"minHeight\":h+\"px\"}):null,k=v.token?(g||[]).map(function(t,e){t={\"$original\":(0,w.internal_get_original)(t)};var o=\"ffzzz\"+e;i.anonymousFunc0Map[o]=function(){return i.goProduct(t.$original)};var n=t.$original&&\"ON_SALES\"==t.$original.status&&v.token?(0,w.internal_inline_style)({\"backgroundImage\":\"url(\"+M.default.appUtils.getFileUrl(t.$original.mainImgUrl)+\")\"}):null,r=t.$original&&(\"DOWN_SALES\"==t.$original.status||\"INVALID\"==t.$original.status)&&v.token?(0,w.internal_inline_style)({\"backgroundImage\":\"url(\"+M.default.appUtils.getFileUrl(t.$original.mainImgUrl)+\")\"}):null,l=t.$original&&(\"DOWN_SALES\"==t.$original.status||\"INVALID\"==t.$original.status)&&v.token?(0,w.internal_inline_style)({\"backgroundImage\":\"url(\"+C.default.goods.down+\")\"}):null,a=\"fgzzz\"+e;return i.anonymousFunc1Map[a]=function(){return i.clearProduct(t.$original,e)},{\"_$indexKey\":o,\"$loopState__temp5\":n,\"$loopState__temp7\":r,\"$loopState__temp9\":l,\"_$indexKey2\":a,\"$original\":t.$original}}):[];return v.token&&w.propsManager.set({\"isLoaded\":f,\"hasMore\":m,\"isEmpty\":y,\"onScrollToLower\":this.onScrollToLower,\"onPullDownRefresh\":this.onPullDownRefresh,\"style\":b,\"launch\":S},u,a),v.token&&w.propsManager.set({\"msg\":\"您还未收藏过商品\",\"type\":2},p,_),this.$$refs.pushRefs([{\"type\":\"component\",\"id\":\"fezzz\",\"refName\":\"\",\"fn\":function fn(t){return i.scrollV=t}}]),Object.assign(this.__state,{\"anonymousState__temp\":b,\"anonymousState__temp2\":S,\"anonymousState__temp3\":I,\"loopArray38\":k,\"$compid__98\":u,\"$compid__99\":p,\"userInfo\":v,\"styles\":D.default}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(t){for(var e,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc0Map[t]&&(e=this.anonymousFunc0Map)[t].apply(e,n)}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(t){for(var e,o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return this.anonymousFunc1Map[t]&&(e=this.anonymousFunc1Map)[t].apply(e,n)}}]),a=l=Collect,l.$$events=[\"anonymousFunc0\",\"anonymousFunc1\"],l.$$componentPath=\"pages/collect/collect\",r=a))||r;function Collect(){var t,e,u;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,Collect);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=u=_possibleConstructorReturn(this,(t=Collect.__proto__||Object.getPrototypeOf(Collect)).call.apply(t,[this].concat(n)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"loopArray38\",\"$compid__98\",\"$compid__99\",\"userInfo\",\"list\",\"styles\",\"level\",\"isLoaded\",\"hasMore\",\"isEmpty\",\"screenHeight\",\"globalStore\"],u.getLevel=function(){var t=s.default.globalStore.data.userInfo.shopId;u.getCompanyId()&&c.default.order.getShopMemberLevelInfo({\"shopId\":t}).then(function(t){t&&u.setState({\"level\":t.memberLevel})})},u.clearProduct=function(t,e){var o=u.state.list,n=t.id,r=t.itemId,l=t.agentCompanyId;c.default.goods.collect({\"agentItemId\":n,\"itemId\":r,\"agentCompanyId\":l,\"collect\":0}).then(function(t){if(!t)return!1;o.splice(e,1),u.setState({\"list\":o,\"isEmpty\":0==o.length})})},u.goProduct=function(t){var e=u.getCompanyId();i.default.navigateTo({\"url\":\"/pages/goodsdetail/goodsdetail?agentItemId=\"+t.id+\"&itemId=\"+t.itemId+\"&companyId=\"+e})},u.getData=function(t){var e=t.pageNo,o=void 0===e?1:e,n=t.pageSize,r=void 0===n?15:n,l=t.callback,a=u.state.list,i=u.getCompanyId();c.default.goods.collectList({\"pageNo\":o,\"pageSize\":r,\"agentCompanyId\":i}).then(function(t){if(!t)return u.setState({\"isEmpty\":!0}),!1;var e=a.concat(t);u.setState({\"isLoaded\":!0,\"isShow\":!0,\"list\":e,\"pageNum\":o,\"isEmpty\":e.length<=0}),t.length<r?u.setState({\"hasMore\":!1}):u.setState({\"hasMore\":!0}),l&&l()})},u.onScrollToLower=function(t){var e=u.state.pageNum;e++,u.getData({\"pageNo\":e,\"callback\":t})},u.onPullDownRefresh=function(t){u.setState({\"list\":[]},function(){return u.getData({\"callback\":t})})},u.config={\"navigationBarTitleText\":\"我的收藏\",\"enablePullDownRefresh\":!1},u.anonymousFunc0Map={},u.anonymousFunc1Map={},u.customComponents=[\"ListView\",\"Empty\",\"Entry\"],_possibleConstructorReturn(u,e)}e.default=_,Component(o(0).default.createComponent(_,!0))},\"267\":function(t,e,o){\"use strict\";o.r(e);o(268);var n=o(95);for(var r in n)\"default\"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r)},\"268\":function(t,e,o){\"use strict\";o(173)},\"269\":function(t,e,o){t.exports={\"list\":\"collect-module__list___1G9G0\",\"store_desc\":\"collect-module__store_desc___2GD8Z\",\"store_icon\":\"collect-module__store_icon___QfkWu\",\"arrow_icon\":\"collect-module__arrow_icon___1Nn-F\",\"product_desc\":\"collect-module__product_desc___2S15X\",\"product_img\":\"collect-module__product_img___R9dtv\",\"product_info\":\"collect-module__product_info___1BQ2L\",\"product_title\":\"collect-module__product_title___3GBrM\",\"product_price\":\"collect-module__product_price___1eoQn\",\"product_profit\":\"collect-module__product_profit___2xfxM\",\"product_price_box\":\"collect-module__product_price_box___tuCBF\",\"product_buy\":\"collect-module__product_buy___3oC-c\",\"gray\":\"collect-module__gray___1pWRR\",\"black\":\"collect-module__black___yPm_M\",\"product_clear\":\"collect-module__product_clear___3Krfr\",\"product_profit_gray\":\"collect-module__product_profit_gray___1eGac\",\"mask\":\"collect-module__mask___2JRb_\",\"empty\":\"collect-module__empty___3kLGc\",\"empty_box\":\"collect-module__empty_box___1BPcW\",\"nologinContainer\":\"collect-module__nologinContainer___259Jt\",\"nologinInner\":\"collect-module__nologinInner___2aaVV\"}},\"95\":function(t,e,o){\"use strict\";o.r(e);var n=o(21),r=o.n(n);for(var l in n)\"default\"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e.default=r.a}},[[267,0,1,2,3]]]);","extractedComments":[]}