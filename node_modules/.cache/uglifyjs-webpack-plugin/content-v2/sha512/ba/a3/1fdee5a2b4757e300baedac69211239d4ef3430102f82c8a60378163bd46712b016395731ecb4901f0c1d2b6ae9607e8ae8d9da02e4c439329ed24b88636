{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[14],{\"136\":function(e,t,n){\"use strict\";n.r(t);var o=n(61),r=n.n(o);for(var a in o)\"default\"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t.default=r.a},\"211\":function(e,t,n){e.exports=n.p+\"components/share-tool/index.wxml\"},\"398\":function(e,t,n){\"use strict\";n.r(t);n(399);var o=n(136);for(var r in o)\"default\"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r)},\"399\":function(e,t,n){\"use strict\";n(211)},\"400\":function(e,t,n){e.exports={\"share_box\":\"index-module__share_box___3D-Kg\",\"item\":\"index-module__item___2LKZ_\",\"font\":\"index-module__font___1LAZr\",\"imgicon\":\"index-module__imgicon___3MZMY\",\"out\":\"index-module__out___1k0_e\",\"canvas_out\":\"index-module__canvas_out___UvtNm\",\"canvas\":\"index-module__canvas___2Mt4S\",\"img_desc\":\"index-module__img_desc___1701A\",\"qrModal\":\"index-module__qrModal___1QxLC\"}},\"61\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,a,h=n(0),c=_interopRequireDefault(h),i=n(3),s=_interopRequireDefault(n(4)),m=_interopRequireDefault(n(6)),l=_interopRequireDefault(n(11)),y=_interopRequireDefault(n(400));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var f=s.default.drawQrcode,u=(function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Collect,c.default.Component),o(Collect,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if(\"value\"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0})(Collect.prototype.__proto__||Object.getPrototypeOf(Collect.prototype),\"_constructor\",this).call(this,e),this.state={\"screenWidth\":\"\",\"screenHeight\":\"\",\"modalVisible\":!1,\"tempFilePath\":\"\"},this.$$refs=new c.default.RefsArray}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=l.default.globalStore.data.systemInfo,t=e.screenWidth,n=e.screenHeight;this.setState({\"screenWidth\":t,\"screenHeight\":n})}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){var o=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var r=this.$prefix,a=(0,h.genCompid)(r+\"$compid__164\"),i=p(a,2),s=i[0],l=i[1],u=this.__state,c=u.screenWidth,f=u.modalVisible,d=(u.tempFilePath,(this.__props.params||{}).showShareImg);this.anonymousFunc0=function(){return o.drawBall()},this.anonymousFunc1=function(){o.setState({\"modalVisible\":!1})};var _=(0,h.internal_inline_style)({\"height\":\"300px\",\"width\":c+\"px\"});return h.propsManager.set({\"isOpened\":f,\"onClose\":this.anonymousFunc1},l,s),Object.assign(this.__state,{\"anonymousState__temp\":_,\"$compid__164\":l,\"styles\":y.default,\"Assets\":m.default,\"showShareImg\":d}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}}]),a=r=Collect,r.$$events=[\"anonymousFunc0\"],r.$$componentPath=\"components/share-tool/index\",a);function Collect(){var e,t,u;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Collect);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=u=_possibleConstructorReturn(this,(e=Collect.__proto__||Object.getPrototypeOf(Collect)).call.apply(e,[this].concat(o)))).$usedState=[\"anonymousState__temp\",\"$compid__164\",\"styles\",\"Assets\",\"showShareImg\",\"tempFilePath\",\"screenWidth\",\"screenHeight\",\"modalVisible\",\"params\"],u.formatPoint=function(e,t){if(\"NaN\"===e)return\"--\";var n=t||2,o=Math.pow(10,n);return Math.round(e*o,10)/o},u.drawBall=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=u.state,t=e.screenHeight,a=e.screenWidth,n=u.props.params,i=n.code,o=n.link,s=n.icon,l=u;c.default.createCanvasContext(\"canvas\",l).clearRect(0,0,a,t),c.default.downloadFile({\"url\":s||m.default.register.logo,\"success\":function success(e){c.default.getImageInfo({\"src\":e.tempFilePath}).then(function(e){f({\"width\":200,\"height\":200,\"x\":(a-200)/2,\"y\":80,\"image\":{\"imageResource\":e.el,\"hasBgRadius\":!0,\"dWidth\":60,\"dHeight\":60,\"dx\":(a-60)/2,\"dy\":150},\"canvasId\":\"canvas\",\"text\":o,\"callback\":function callback(e,t){t.save(),t.fillStyle=\"#fff\",t.fillRect(0,0,a,80),t.fillRect(0,80,(a-200)/2,200),t.fillRect((a-200)/2+200,80,(a-200)/2,200),t.fillRect(0,280,a,20),t.setFillStyle(\"#9a9a9a\"),t.font=\"18px Arial\";var n=u.formatPoint((a-1.8*t.measureText(\"推荐码\").width)/2);t.fillText(\"推荐码\",n,40),t.setFillStyle(\"#333333\"),t.font=\"25px Arial\";var o=u.formatPoint((a-2.5*t.measureText(i).width)/2);t.fillText(i,o,70),t.restore(),l.drawImg(t,l,r)}},l)})}})},u.drawImg=function(e,t,n){var o=u.state,r=o.screenHeight,a=o.screenWidth;e.draw(!0,function(){c.default.canvasToTempFilePath({\"x\":0,\"y\":0,\"width\":a,\"height\":r,\"destWidth\":a,\"destHeight\":r,\"canvasId\":\"canvas\",\"success\":function success(e){t.setState({\"modalVisible\":1!==n,\"shareVisible\":!1,\"tempFilePath\":e.tempFilePath},function(){1===n&&t.drawBall(n=2)})},\"fail\":function fail(){c.default.showLoading({\"title\":\"绘制图片路径失败\"})}})})},u.copyLink=function(e){c.default.setClipboardData({\"data\":e,\"success\":function success(){i.message.success(\"复制成功\")}})},u.config={\"navigationBarTitleText\":\"\"},u.customComponents=[\"AtModal\",\"AtModalContent\"],_possibleConstructorReturn(u,t)}t.default=u,Component(n(0).default.createComponent(u))}},[[398,0,1,2,3]]]);","extractedComments":[]}