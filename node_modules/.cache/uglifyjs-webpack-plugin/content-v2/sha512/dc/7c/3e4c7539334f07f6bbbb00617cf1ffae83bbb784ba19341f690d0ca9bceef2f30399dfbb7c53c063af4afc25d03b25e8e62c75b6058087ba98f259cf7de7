{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[12],{\"124\":function(e,t,n){\"use strict\";n.r(t);var o=n(54),r=n.n(o);for(var i in o)\"default\"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t.default=r.a},\"324\":function(e,t,n){e.exports=n.p+\"components/share-tool/index.wxml\"},\"493\":function(e,t,n){\"use strict\";n.r(t);n(494);var o=n(124);for(var r in o)\"default\"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r)},\"494\":function(e,t,n){\"use strict\";n(324)},\"495\":function(e,t,n){e.exports={\"share_box\":\"index-module__share_box___3D-Kg\",\"item\":\"index-module__item___2LKZ_\",\"font\":\"index-module__font___1LAZr\",\"wx\":\"index-module__wx___Or3aT\",\"img\":\"index-module__img___3HU05\",\"link\":\"index-module__link___3BYT8\",\"canvas_out\":\"index-module__canvas_out___UvtNm\",\"canvas\":\"index-module__canvas___2Mt4S\",\"img_desc\":\"index-module__img_desc___1701A\",\"qrModal\":\"index-module__qrModal___1QxLC\"}},\"54\":function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,i,y=n(1),u=_interopRequireDefault(y),a=n(5),s=_interopRequireDefault(n(4)),f=_interopRequireDefault(n(9)),v=_interopRequireDefault(n(495));function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var d=s.default.getImageInfo,_=s.default.drawQrcode,c=(function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Collect,u.default.Component),o(Collect,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if(\"value\"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0})(Collect.prototype.__proto__||Object.getPrototypeOf(Collect.prototype),\"_constructor\",this).call(this,e),this.state={\"screenWidth\":\"\",\"screenHeight\":\"\",\"modalVisible\":!1,\"tempFilePath\":\"\"},this.$$refs=new u.default.RefsArray}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var t=this;u.default.getSystemInfo({\"success\":function success(e){t.setState({\"screenWidth\":e.screenWidth,\"screenHeight\":e.screenHeight})}})}},{\"key\":\"_createData\",\"value\":function _createData(e,t,n){var o=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var r=this.$prefix,i=(0,y.genCompid)(r+\"$compid__119\"),a=m(i,2),s=a[0],c=a[1],l=this.__state,u=l.screenWidth,f=l.modalVisible,d=(l.tempFilePath,this.__props.params||{}),_=d.link,p=d.showShareImg;this.anonymousFunc0=function(){return o.drawBall()},this.anonymousFunc1=function(){return o.copyLink(_)},this.anonymousFunc2=function(){o.setState({\"modalVisible\":!1})};var h=(0,y.internal_inline_style)({\"height\":\"300px\",\"width\":u+\"px\"});return y.propsManager.set({\"isOpened\":f,\"onClose\":this.anonymousFunc2},c,s),this.$$refs.pushRefs([{\"type\":\"component\",\"id\":\"gjzzz\",\"refName\":\"\",\"fn\":function fn(e){return o.collect=e}}]),Object.assign(this.__state,{\"anonymousState__temp\":h,\"$compid__119\":c,\"styles\":v.default,\"showShareImg\":p}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}},{\"key\":\"anonymousFunc2\",\"value\":function anonymousFunc2(){}}]),i=r=Collect,r.$$events=[\"openShareTip\",\"anonymousFunc0\",\"anonymousFunc1\"],r.$$componentPath=\"components/share-tool/index\",i);function Collect(){var e,t,l;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Collect);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=l=_possibleConstructorReturn(this,(e=Collect.__proto__||Object.getPrototypeOf(Collect)).call.apply(e,[this].concat(o)))).$usedState=[\"anonymousState__temp\",\"$compid__119\",\"styles\",\"showShareImg\",\"tempFilePath\",\"screenWidth\",\"screenHeight\",\"modalVisible\",\"params\"],l.openShareTip=function(){l.collect.setState({\"shareVisible\":!0})},l.formatPoint=function(e,t){if(\"NaN\"===e)return\"--\";var n=t||2,o=Math.pow(10,n);return Math.round(e*o,10)/o},l.drawBall=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=l.state,t=e.screenHeight,i=e.screenWidth,n=l.props.params,a=n.code,o=n.link,s=n.icon,c=l;u.default.createCanvasContext(\"canvas\",c).clearRect(0,0,i,t),u.default.downloadFile({\"url\":s||f.default.register.logo,\"success\":function success(e){d({\"src\":e.tempFilePath}).then(function(e){_({\"width\":200,\"height\":200,\"x\":(i-200)/2,\"y\":80,\"image\":{\"imageResource\":e.el,\"hasBgRadius\":!0,\"dWidth\":60,\"dHeight\":60,\"dx\":(i-60)/2,\"dy\":150},\"canvasId\":\"canvas\",\"text\":o,\"callback\":function callback(e,t){t.save(),t.fillStyle=\"#fff\",t.fillRect(0,0,i,80),t.fillRect(0,80,(i-200)/2,200),t.fillRect((i-200)/2+200,80,(i-200)/2,200),t.fillRect(0,280,i,20),t.setFillStyle(\"#9a9a9a\"),t.font=\"18px Arial\";var n=l.formatPoint((i-1.8*t.measureText(\"推荐码\").width)/2);t.fillText(\"推荐码\",n,40),t.setFillStyle(\"#333333\"),t.font=\"25px Arial\";var o=l.formatPoint((i-2.5*t.measureText(a).width)/2);t.fillText(a,o,70),t.restore(),c.drawImg(t,c,r)}},c)})}})},l.drawImg=function(e,t,n){var o=l.state,r=o.screenHeight,i=o.screenWidth;e.draw(!0,function(){u.default.canvasToTempFilePath({\"x\":0,\"y\":0,\"width\":i,\"height\":r,\"destWidth\":i,\"destHeight\":r,\"canvasId\":\"canvas\",\"success\":function success(e){t.setState({\"modalVisible\":1!==n,\"shareVisible\":!1,\"tempFilePath\":e.tempFilePath},function(){1===n&&t.drawBall(n=2)})},\"fail\":function fail(){u.default.showLoading({\"title\":\"绘制图片路径失败\"})}})})},l.copyLink=function(e){u.default.setClipboardData({\"data\":e,\"success\":function success(){a.message.success(\"复制成功\")}})},l.config={\"navigationBarTitleText\":\"\"},l.customComponents=[\"AtModal\",\"AtModalContent\",\"Collectmodal\"],_possibleConstructorReturn(l,t)}t.default=c,Component(n(1).default.createComponent(c))}},[[493,0,1,2,3]]]);","extractedComments":[]}