{"code":"(wx.webpackJsonp=wx.webpackJsonp||[]).push([[43],{\"116\":function(e,t,o){\"use strict\";o.r(t);var a=o(41),n=o.n(a);for(var r in a)\"default\"!==r&&function(e){o.d(t,e,function(){return a[e]})}(r);t.default=n.a},\"196\":function(e,t,o){e.exports=o.p+\"pages/after-sales/after-sales.wxml\"},\"340\":function(e,t,o){\"use strict\";o.r(t);o(341);var a=o(116);for(var n in a)\"default\"!==n&&function(e){o.d(t,e,function(){return a[e]})}(n)},\"341\":function(e,t,o){\"use strict\";o(196)},\"342\":function(e,t,o){e.exports={\"content\":\"after-sales-module__content___3KWuc\",\"product_box\":\"after-sales-module__product_box___3-_Rd\",\"title\":\"after-sales-module__title___34bM6\",\"icon_shop\":\"after-sales-module__icon_shop___87FbL\",\"font\":\"after-sales-module__font___1WWVv\",\"status_box\":\"after-sales-module__status_box___y_PMk\",\"red\":\"after-sales-module__red___3_qSg\",\"info_box\":\"after-sales-module__info_box___27xA9\",\"img\":\"after-sales-module__img___e32kT\",\"info_right\":\"after-sales-module__info_right___ewCAP\",\"income_container\":\"after-sales-module__income_container___3mcVZ\",\"item_line\":\"after-sales-module__item_line___2M2b7\",\"info_title\":\"after-sales-module__info_title___3dF7G\",\"num\":\"after-sales-module__num___18kKi\",\"recv\":\"after-sales-module__recv___1XDto\",\"second\":\"after-sales-module__second___SIdmH\",\"all_price\":\"after-sales-module__all_price___ldyBx\",\"all_num\":\"after-sales-module__all_num___36hPn\",\"transfee_box\":\"after-sales-module__transfee_box___14m71\",\"form_box\":\"after-sales-module__form_box___2kNOA\",\"photo_box\":\"after-sales-module__photo_box___1tZTX\",\"lable_font\":\"after-sales-module__lable_font___1U7de\",\"bottom_box\":\"after-sales-module__bottom_box___2t67O\",\"button\":\"after-sales-module__button___3172u\",\"gray_button\":\"after-sales-module__gray_button___2VzXr\",\"sure_button\":\"after-sales-module__sure_button___2uh1v\",\"line_box\":\"after-sales-module__line_box___Mhgfu\",\"label\":\"after-sales-module__label___e_ljA\",\"right\":\"after-sales-module__right___3CmCg\",\"input_box\":\"after-sales-module__input_box___bVrne\",\"inner\":\"after-sales-module__inner___3XBE3\"}},\"41\":function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{\"value\":!0});var Se=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var o=[],a=!0,n=!1,r=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done)&&(o.push(l.value),!t||o.length!==t);a=!0);}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},a=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n,r,l,ke=o(0),Ce=_interopRequireDefault(ke),u=o(3),s=_interopRequireDefault(o(1)),_=_interopRequireDefault(o(2)),Me=_interopRequireDefault(o(342)),i=o(4);function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var c=_interopRequireDefault(i).default.appUtils,Ae=c.getFileUrl,Te=c.formatPoint,p=(0,s.default)((function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AfterSales,Ce.default.Component),a(AfterSales,[{\"key\":\"_constructor\",\"value\":function _constructor(e){(function get(e,t,o){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,o)}if(\"value\"in a)return a.value;var r=a.get;return void 0!==r?r.call(o):void 0})(AfterSales.prototype.__proto__||Object.getPrototypeOf(AfterSales.prototype),\"_constructor\",this).call(this,e),this.state={\"tuiModal\":!1,\"tuiOption\":[],\"checkTuiType\":\"\",\"reasonModalOption\":[{\"label\":\"质量问题\",\"value\":1},{\"label\":\"实物与图片不符\",\"value\":2},{\"label\":\"七天无理由\",\"value\":3},{\"label\":\"其他\",\"value\":4}],\"reasonModal\":!1,\"checkReasonType\":null,\"postFile\":[],\"item\":{},\"remarks\":\"\",\"amount\":\"\",\"maxAmount\":0},i.appUtils.delay(this,[\"goResult\"]),this.$$refs=new Ce.default.RefsArray}},{\"key\":\"componentWillReact\",\"value\":function componentWillReact(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this.$router.params.orderNo;this.queryDetail(e)}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"_createData\",\"value\":function _createData(e,t,o){var a=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var n=this.$prefix,r=(0,ke.genCompid)(n+\"$compid__139\"),l=Se(r,2),s=l[0],i=l[1],u=(0,ke.genCompid)(n+\"$compid__140\"),_=Se(u,2),c=_[0],p=_[1],m=(0,ke.genCompid)(n+\"$compid__141\"),d=Se(m,2),f=d[0],h=d[1],v=(0,ke.genCompid)(n+\"$compid__142\"),y=Se(v,2),b=y[0],g=y[1],$=(0,ke.genCompid)(n+\"$compid__143\"),x=Se($,2),S=x[0],k=x[1],C=(0,ke.genCompid)(n+\"$compid__144\"),M=Se(C,2),A=M[0],T=M[1],O=(0,ke.genCompid)(n+\"$compid__145\"),w=Se(O,2),R=w[0],F=w[1],P=(0,ke.genCompid)(n+\"$compid__146\"),D=Se(P,2),N=D[0],j=D[1],I=(0,ke.genCompid)(n+\"$compid__147\"),W=Se(I,2),q=W[0],U=W[1],L=(0,ke.genCompid)(n+\"$compid__148\"),B=Se(L,2),E=B[0],V=B[1],z=(0,ke.genCompid)(n+\"$compid__149\"),X=Se(z,2),H=X[0],J=X[1],K=(0,ke.genCompid)(n+\"$compid__150\"),Z=Se(K,2),G=Z[0],Q=Z[1],Y=(0,ke.genCompid)(n+\"$compid__151\"),ee=Se(Y,2),te=ee[0],oe=ee[1],ae=this.__state,ne=ae.tuiModal,re=ae.tuiOption,le=ae.checkTuiType,se=ae.reasonModal,ie=ae.checkReasonType,ue=ae.reasonModalOption,_e=(ae.files,ae.item),ce=ae.remarks,pe=ae.type,me=ae.amount,de=(ae.maxAmount,this.$router.params.shopLevel);de=Number(de);var fe=Ce.default.getStorageSync(\"userInfo\").shopName,he=Ae(_e.skuImg),ve=Te(_e.agentUnitPrice*_e.count,4),ye=1===pe?re[re.findIndex(function(e){return e.value===le})].label||\"请选择类型\":null,be=2===pe?\"\"+le&&re[re.findIndex(function(e){return e.value===le})].label||\"请选择类型\":null,ge=3!==le?\"￥\"+me:null,$e=ie?ue[ue.findIndex(function(e){return e.value===ie})].label:\"请选择原因\";this.anonymousFunc0=function(e){a.setState({\"remarks\":e})},this.anonymousFunc1=function(){return a.setState({\"mask\":!0})};var xe=(1===pe?\"退款\":\"售后\")+\" 类型\";return ke.propsManager.set({\"count\":1},i,s),1===pe&&ke.propsManager.set({\"title\":\"退款类型\",\"extraText\":ye},p,c),2===pe&&ke.propsManager.set({\"title\":\"售后类型\",\"onClick\":this.tuiClick,\"arrow\":\"down\",\"extraText\":be},h,f),3!==le&&ke.propsManager.set({\"title\":\"退款金额\",\"extraText\":ge},g,b),3===le&&ke.propsManager.set({\"title\":\"退款金额\"},k,S),3===le&&ke.propsManager.set({\"value\":me,\"onChange\":this.setAmount,\"onBlur\":this.getAmount},T,A),ke.propsManager.set({\"title\":\"退款原因\",\"onClick\":this.reasonClick,\"arrow\":\"down\",\"extraText\":$e},F,R),ke.propsManager.set({\"value\":ce,\"onChange\":this.anonymousFunc0,\"maxLength\":200,\"placeholder\":\"\"},j,N),2===pe&&ke.propsManager.set({\"onRemove\":this.removeWx,\"onSuccess\":this.successWx,\"onClick\":this.anonymousFunc1,\"size\":5},U,q),ke.propsManager.set({\"isOpened\":ne,\"title\":xe,\"onClose\":this.handleClose},V,E),ke.propsManager.set({\"options\":re,\"value\":le,\"onClick\":this.changetuiModal},J,H),ke.propsManager.set({\"isOpened\":se,\"title\":\"退款原因\",\"onClose\":this.reasonModalClose},Q,G),ke.propsManager.set({\"options\":ue,\"value\":ie,\"onClick\":this.changereasonModal},oe,te),this.$$refs.pushRefs([{\"type\":\"component\",\"id\":\"hezzz\",\"refName\":\"\",\"fn\":function fn(e){return a.wxup=e}}]),Object.assign(this.__state,{\"anonymousState__temp\":fe,\"anonymousState__temp2\":he,\"anonymousState__temp3\":ve,\"anonymousState__temp4\":ye,\"anonymousState__temp5\":be,\"anonymousState__temp6\":ge,\"anonymousState__temp7\":$e,\"anonymousState__temp8\":xe,\"$compid__139\":i,\"$compid__140\":p,\"$compid__141\":h,\"$compid__142\":g,\"$compid__143\":k,\"$compid__144\":T,\"$compid__145\":F,\"$compid__146\":j,\"$compid__147\":U,\"$compid__148\":V,\"$compid__149\":J,\"$compid__150\":Q,\"$compid__151\":oe,\"styles\":Me.default,\"shopLevel\":de,\"type\":pe}),this.__state}},{\"key\":\"anonymousFunc0\",\"value\":function anonymousFunc0(){}},{\"key\":\"anonymousFunc1\",\"value\":function anonymousFunc1(){}}]),l=r=AfterSales,r.$$events=[\"goIndex\",\"goResult\",\"handleClose\",\"reasonModalClose\"],r.$$componentPath=\"pages/after-sales/after-sales\",n=l))||n;function AfterSales(){var e,t,i;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,AfterSales);for(var o=arguments.length,a=Array(o),n=0;n<o;n++)a[n]=arguments[n];return(t=i=_possibleConstructorReturn(this,(e=AfterSales.__proto__||Object.getPrototypeOf(AfterSales)).call.apply(e,[this].concat(a)))).$usedState=[\"anonymousState__temp\",\"anonymousState__temp2\",\"anonymousState__temp3\",\"anonymousState__temp4\",\"anonymousState__temp5\",\"anonymousState__temp6\",\"anonymousState__temp7\",\"anonymousState__temp8\",\"$compid__139\",\"$compid__140\",\"$compid__141\",\"$compid__142\",\"$compid__143\",\"$compid__144\",\"$compid__145\",\"$compid__146\",\"$compid__147\",\"$compid__148\",\"$compid__149\",\"$compid__150\",\"$compid__151\",\"styles\",\"shopLevel\",\"type\",\"checkTuiType\",\"remarks\",\"checkReasonType\",\"amount\",\"item\",\"tuiModal\",\"tuiOption\",\"reasonModalOption\",\"reasonModal\",\"postFile\",\"maxAmount\"],i.tuiClick=function(){i.setState({\"tuiModal\":!0})},i.handleClose=function(){i.setState({\"tuiModal\":!1})},i.changetuiModal=function(e){var t=[];2===e&&(t=[{\"label\":\"七天无理由\",\"value\":\"七天无理由\"},{\"label\":\"质量做工不好\",\"value\":\"质量做工不好\"},{\"label\":\"商品描述不符\",\"value\":\"商品描述不符\"},{\"label\":\"卖家发错货\",\"value\":\"卖家发错货\"},{\"label\":\"其他\",\"value\":\"其他\"}]),3===e&&(t=[{\"label\":\"少发漏发不足分量\",\"value\":\"少发漏发不足分量\"},{\"label\":\"有明显破损补差\",\"value\":\"有明显破损补差\"},{\"label\":\"其他\",\"value\":\"其他\"}]),i.setState({\"checkTuiType\":e,\"reasonModalOption\":t,\"checkReasonType\":null})},i.reasonClick=function(){i.setState({\"reasonModal\":!0})},i.reasonModalClose=function(){i.setState({\"reasonModal\":!1})},i.changereasonModal=function(e){i.setState({\"checkReasonType\":e})},i.goResult=function(){var e=i.$router.params.orderNo,t=i.state,o=t.checkTuiType,a=t.postFile,n=t.checkReasonType,r=t.remarks,l=t.item,s=t.amount;return 1!==l.orderStatus&&2!==l.orderStatus&&3!==l.orderStatus?(u.message.error(\"该订单不支持发起售后\"),!1):1===l.settle?(u.message.error(\"订单可结算，不支持售后\"),!1):void _.default.order.creatAfter({\"afterSaleType\":o,\"imgs\":a.join(\",\"),\"orderNo\":e,\"reason\":n,\"remarks\":r,\"scmOrderNo\":l.scmOrderNo,\"afterSaleAmount\":s}).then(function(e){e&&Ce.default.navigateTo({\"url\":\"/pages/sub-result/sub-result\"})})},i.removeWx=function(e){var t=i.state.postFile;t.splice(e,1),i.setState({\"postFile\":t})},i.successWx=function(e){var t=i.state.postFile;t.push(e),i.setState({\"postFile\":t})},i.queryDetail=function(e){_.default.order.queryDetail({\"orderNo\":e}).then(function(e){if(e){e.propsValue=i.getProps(e.newPropsValue);var t=2===Number(e.orderStatus)||3===Number(e.orderStatus)?2:1,o=2==t?[{\"label\":\"退货退款\",\"value\":2},{\"label\":\"申请赔付\",\"value\":3}]:[{\"label\":\"仅退款\",\"value\":1}],a=2==t?[{\"label\":\"七天无理由\",\"value\":\"七天无理由\"},{\"label\":\"质量做工不好\",\"value\":\"质量做工不好\"},{\"label\":\"商品描述不符\",\"value\":\"商品描述不符\"},{\"label\":\"卖家发错货\",\"value\":\"卖家发错货\"},{\"label\":\"其他\",\"value\":\"其他\"}]:[{\"label\":\"我不想要了\",\"value\":\"我不想要了\"},{\"label\":\"未按约定时间发货\",\"value\":\"未按约定时间发货\"},{\"label\":\"快递无跟踪记录\",\"value\":\"快递无跟踪记录\"},{\"label\":\"其他\",\"value\":\"其他\"}];i.setState({\"item\":e,\"amount\":Te(e.agentUnitPrice*e.count),\"tuiOption\":o,\"type\":Number(t),\"checkTuiType\":Number(t),\"reasonModalOption\":a},function(){return i.checkClaimAmount()})}})},i.goIndex=function(){var e=i.getCompanyId();Ce.default.switchTab({\"url\":\"/pages/index/index?companyId=\"+e})},i.getProps=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"\";e=e.replace(\"[\",\"\").replace(\"]\",\"\").replace(/\\\"/g,\"\").split(\",\");var t=[],o=!0,a=!1,n=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var s=r.value;t.push(s.split(\":\")[1])}}catch(e){a=!0,n=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw n}}return t.join(\"/\")},i.checkClaimAmount=function(){var e=i.$router.params.orderNo,t=i.state.amount;_.default.order.checkClaimAmount({\"orderNo\":e}).then(function(e){null!==e&&i.setState({\"maxAmount\":e,\"amount\":e<t?e:t})})},i.setAmount=function(e){var t=e,o=i.state.maxAmount,a=t.replace(/[^\\d.]/g,\"\");return a=o<(a=(a=a.replace(/\\.{2,}/g,\".\").replace(\".\",\"$#$\").replace(/\\./g,\"\").replace(\"$#$\",\".\")).replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,\"$1$2.$3\"))?o:a,i.setState({\"amount\":a}),a},i.config={\"navigationBarTitleText\":\"申请售后\",\"navigationBarBackgroundColor\":\"#F7F8FA\"},i.customComponents=[\"Ellipsis\",\"AtList\",\"AtListItem\",\"AtInput\",\"AtTextarea\",\"Upload\",\"AtFloatLayout\",\"AtRadio\"],_possibleConstructorReturn(i,t)}t.default=p,Component(o(0).default.createComponent(p,!0))}},[[340,0,1,2,3]]]);","extractedComments":[]}